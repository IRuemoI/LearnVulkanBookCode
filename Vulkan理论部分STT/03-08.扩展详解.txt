03-08.Vulkan-扩展详解

啊，因为猫坎呢，它本身是一个很薄的驱动，上层的API，那么对于猫坎来说的话呢，它有些功能是可能别人不需要，而是你需要，对吧？
那么你又不需要的功能，可能别人需要，所以说呢，这些就被封装成为了扩展。
啊，这些扩展的话呢，是在使用期间被加载的那么究竟啊，咱们这个instance里面大概都有怎样的扩展呢？
我们可以先做一个函数去感受一下。
point print available呃extensions。
OK，这个函数呢？
就是负责打印出来w目前这个instance里面所有的冠展名啊，我们看一看怎么去做呢？
void instance。
print好，那么这个函数首先啊，我们要声明一个变量啊I int 32t诶I int 32t那么这个变量是干嘛的呢？
是叫做extensions ion count。
就这个系统里面总共支持多少个扩展是吧？
然后呢？
我们接下来要用这个函数啊wake open enumerate instance extension properties。
这个函数呢，它可以用来获取啊，当前系统中有多少个扩展，并且每一个扩展啊是什么啊，都会给你装到一个数组里面，我们看一下它的这个变量啊，第一个是列令啊，直接弄就可以了。
第二个呢，是它的数量，这个数量呢，我们存入的是extension count的这个地址啊，这样的话呢，这个函数调用完毕之后啊，这个extension count就直接被呃赋值成为当前的一个数量。
最后一个呢，其实是它的呃，这个要存放的地方，就是说我们把这个扩展获取出来，存放到一个vector里面，或者存放到一个数组里面，然后呢，但是现在我们还不知道说它到底有多少个扩展，对吧？
所以这个地方我先纳掉啊，先不拿出来，但是我可以先吃到它的什么count啊，在我拿到count之后呢，那我接下来可以干什么？
我接下来就可以去做一个数组了啊b vector，然后呢，它的内容是什么week extension extension啊，然后叫properties。
好，那么这个是extensions OK，那么这个extensions它里有有有多少个这个extension properties呢？
那么把这个数量啊告诉它是extension count啊，这么多个extension properties。
先把这个空间给我留出来，我把这个空间留出来之后，我接下来可以干什么？
接下来我就可以获取这个扩展，对吧？
调这个函数啊，只不过这次呢，我可以用extensions的data。
来获取来这些数据了啊，可以拿到这些数据了。
然后扩展数据之后，我干什么呢？
我打印一下啊sdd select。
呃，available哦，extensions。
SD变掉。
然后呢？
在这边我们遍历上面这个vector for。
cos auto extension extensions啊，这个数组这个vector那这样一个变异的意思是什么呢？
就是说从这个vector里面啊，取出每一个extension来进行测啊，这是C加加11的语法，大家也可以学习一下啊，auto自动类型推断。
scc啊。
extension.然后它的extension内啊，我们打印出来一样OK，这个过程呢，我们就获取到了目前instance所支持的extensions啊，它的名字。
我们在这儿来，大家看看啊print available extensions。
然后运行。
OK，我们怎么支持这么多的扩展？
对吧啊，支持这么多的扩展，那么这些扩展都是什么意思呢？
就可以自己查一查啊，我们用到的其中几个扩展啊，好变样之后呢，我们要看一看了啊，我们打印出来这么多扩展，那么我们现在要启用哪些扩展呢？
对不对？
我们做instance的时候啊，有一个。
这样一个信息的结构体，其实呢，这里面是可以填入什么呢？
我们看一看啊，它里面可以填入这个end count和extension的names啊，就是说我们做这样一个in sense，希望它开启怎样的扩展。
所以说呢，我们这边写另外一个函数啊sdd vector char呃const char型，这个是get required，然后extensions。
诶，好，这个函数呢，就来获取到我们目前这个系统了，我们想要去开启的扩展。
我们把它写在这里。
fcb没了。
呃const叉行at啊，叫做这个这个instance at。
好，那么这所指的我们想要的扩展，其实啊，目前主要是指glfw这个库啊，需要支持这个库的扩展，所以说呢，我们首先按int 32t，我们需要得到g lw的extensions extension的count。
就是说呢，我们现在啊，调用一下glfw的函数看一看啊，这个库它到底要求我们的lock系统给出多少个扩展？
好的OK，我们定义一个const叉，这几个const叉星星GIF w extension呃4 extensions OK，这是个什么东西啊？
这是什么东西？
叉星是字符串对吧？
字符串儿的星就是指的字符串儿的一个数组，对吧？
这样看啊，这样看这个类型的星啊，就是一个这个类型的东西的数组，这么个意思？
它的什么呢？
gi w我们调一个gi w复函数啊get required instance extensions，然后呢，我们传入的是什么啊？
传入的是gi w extension的count啊。
这样的话呢，我们传入这货的一个地址，那么这个函数在调用的时候，一方面会返回它所要的所有的扩展的啊，名字的字符串数组，然后呢，并且将我们这个值置为什么呢？
视为我们呃所需要的扩展的数量啊g lw所需要的扩展的数量和名称都得到了啊，这个函数随后呢，我们把这个函数装到一个呃，把这个最后的结果装到一个actor里面啊vector。
const叉c这个叫做extensions啊，extensions，然后呢，我们这样看啊，既有extensions，然后后面设计rw extensions。
加上grwllw extension的count啊，extension的诶。
extension count下吧。
OK，这句话什么意思呢？
大家如果能很少有会用到这种啊，那个vector的构建方式对吧？
它传入的是一个数组的开头的指针，然后从这个数组的位置去移动了这些元素个数的空间。
呃，有的同学会问啊，这是个地址对吧？
这是个数组的地址，加上了一个数组里元素的个数，这不对啊，对不对？
不应该是数组元素的个数乘以数组中每个元素的它的size嘛，对吧啊？
那这个地方呢？
由于它是一个数组。
那么C加加的边且在这一步会把它理解成为一个数组指针，那偏移啊，是这个意思，这个偏什么意思啊？
比如说有五个元素对吧？
这是五那么它每一次啊，它这个整个下来就是五×size of这个element大小啊，会变成这样。
所以说它移动的距离说单纯的上加啊，这样它是一个相当于说乘上了元素的大小OK，那么我们把这些东西啊装到了extensions里面啊，把这些字符串装进去之后，我们干嘛呀？
是返回extensions。
啊，返回好，那么我们这个d lw所需要的扩展，我们都拿到了啊，我们再回上去啊，这样的话呢，我们就可以去丰富这个instance啊，丰富这个instance怎么做呢？
inst great infer哎，great infer它的呃，enable extension count=static cast啊int 32 t cost谁呢？
那么我们上面是不是要获取一下啊？
在这获取一下auto。
叫做extensions=re get啊，require extensions对吧？
然后呢？
我们得到这个呃grw所需要的数组啊，所说的扩展名数组，然后这边呢extensions。
它的size哎，现在我们就把总共需要多少个扩展给到这个enable extension count啊？
这是一个x叉，所以这边我们静态传一下。
然后呢，再来一个create。
一份the p呃tension names应该就等于extension 4的。
把这个名字的数组啊，给它放上去啊，对吧？
这样的话就没有问题了啊，这样的话就没有问题了，然后在创建的时候啊，它就会去检查诶，这边到底需要多少扩展，然后给它加载，然后打开这个扩展启用啊，这个意思。
我们跑一下看看。
好okay，没有问题，我们看一下啊。
看它到底起了什么扩展，我们先跟到这个函数里面啊，打个半年。
然后呢，再去到这里啊，这里能达到这里吧，好看一下。
首先呢，它会执行到这儿啊，就是get这个g lw的扩展，然后进到这个函数走走，然后它这边已经拿到了字符串，对吧？
由于它这个agl w extensions，它是一个指针啊，所以我们只能看到是吧一个啊，但是呢，如果把它复制到这个extensions里面之后啊，我们看一下。
诶，有两个，一个是k12 surface，一个是k12跟三二四的face，这两个扩展都被打开了。
所以我们可以看到glfw啊，它已经打开了对vulkan的这样一个支持，并且呢，它还呃根据我们的WINDOWS 2系统啊Windows系统，然后这样展开了一个WINDOWS的扩展啊，是这样子，所以它需要这两个扩展，然后呢，我们把这两个扩展名就返回回去。
哎，得到它，然后复制到这个infer里面，然后用infer呢，再去创建这个instance创建成功啊，然后这个窗口就出来了啊OK，那么我们这节课呢，就介绍extensions啊，extensions呢，后面可能还有更多的需要添加啊，所以我们在这做工具函数啊，在这边可能除了gfw。
它的in之外，我们还要加其他的扩展啊。

