05-01.Vulkan-Pipeline概念精讲（一）

我们从这节课开始呢，就要讲一讲这个渲染管线这个东西了。
我们现在已经把我们的基础的程序给搭建出来了啊，但是呢，还是没有画出三角形，因为后面我们还要设置很多的东西，对吧？
就比如这个渲染短线。
那么，看一下宣传管线在里面的位置啊，唉，在这个位置对吧啊？
这个位置我们看啊，这边准备了一堆的条件，就是我们前几节课准备好的这堆条件。
那么这边呢？
开始我们就准备好这些条啊pipeline，然后呢把它给到RP ASS是吧，然后把这几个东西再给过来啊，然后共同再往下给。
这个pipeline呢？
现在它这个东西呢？
我们看一下啊，合一一下，在一开始的时候给大家讲过这张图是吧？
pipeline啊，数据顶点数据从这流入啊，经过一层又一层的变换跟操作，最终呢，输出到屏幕上这样的一个过程。
啊称为拍不烂的操作，那么我们要提出啊一些东西啊，第一个啊，渲染管线是规定了当前这个模型数据的什么呢？
啊，它是规定的，一如何理解这堆模型，你比如说啊，它是三角形还是直线对吧？
二呢？
如何渲染啊？
它是用缝设定啊ppl啊？
还是那样的一些什么各种渲染方式呢？
对吧？
那么说白了就是用什么shield？
对吧，但如何blending啊？
透明半透明的物体如何做颜色混合四对比不同物体的深度生长关系五呃，如何按入特定的变量到c里面？
比如我要给谁的传一个时间的一个值，随着时间值的变化，里面的颜色在发生变化，对吧？
OK，那么渲染短线，大家先理解一下它呢，就能够告诉我们的网点程序啊，你把这一堆问题怎么去处理，最终得到我们的这个。
啊，像素好那么渲染管线这个东西啊，它与材质有什么关系呢？
大家如果使用过一些商业引擎啊，或者是说做过一些三维开发啊，那么大家应该能感受过啊，有一种东西叫材质对吧？
这是什么呢？
材质是说它规定了啊，当前这个物体。
它如何与环境啊？
它比如说它反光的强度如何呀啊？
再比如说它那个是否会发生散射呀啊？
它是否会透明啊？
等等啊，那么这就是材质对吧？
那么本质上来讲，其实渲染管线呢？
它应该隶属于材质啊，规定了如何对模型数据进行绘制。
接下来我们看一下啊vulkan当中的pipeline，在vulkan当中pipeline属于一个句柄类型，它是可以被详细设置的啊，这时候呢，pipeline其实是独立出来的一个对象。
那么我们理解一下pipeline，它其实属于材质的一部分，所以说在写啊，在写我们的这个引擎的时候啊，大家可以自己写一个material的类。
材质类那么材质类里面呢？
就是包含了pipeline啊，那对材质的设置其实就是对pipeline的设置，那么每个match都有自己对应的材质，也就意味着什么呢？
意味着每个match绑定自己的渲染管线。
对吧，那么如果两个面是共用同一个材质，那就意味着什么？
共用了同一个排布拉，那么把派布拉也要理解成为一种什么呢？
一种渲染的模板啊，它是一种模板。
这个pipeline的话，它只是说啊，对于顶点处理流程的一个描述，所以猫狗拿到这个pipeline之后啊，它会按照这个模板去处理这些模型数据。
那么我们看一下，在拍不烂里面啊，到底有多少种模块啊？
第一是一道模块，首先是一道组，在vulkan当中啊，或者是在我们很多这个图形学工具里面，比如OpenGL啥的啊，那么它有很多种cdr，比如我cdr是处理顶点的。
胶水鞋带是处理几何的啊？
省啊，或者减少啊tesla ation啊，是曲面细分，然后fragment鞋带啊，它是用来做最终的图源输出啊等等，它都在管线的不同阶段发挥着不同的处理作用啊，像流水线一样，彼此相连。
那么，所有的阶段谁的合在一起不成了，谁的组也就是说呀，比如说我们当前有一个三角形，这个三角形的话呢，我们给它一条排出来，让它流过这个排出来。
那么，在tab line里面，我们可以设置各种不同阶段的不同sheet r，对吧？
然后把这一堆不同的点儿组合在一起，就形成了一个sheet r组。
那么，在本pap line当中呢？
将其用到的sheet r都可以设置进去啊，把这个sheet r组设置进去，那么这条线就会使用这个sheet r组当中呢？
主色程序对模型的顶点及片源进行处理啊，这个非常简单啊，就说白了，把你用的sheet r设到这个piper里面就好了，那么OK我们就得到了sheet r模块儿啊piper里面第一个模块儿就shieldr组的设施。
第二呢，我们重点说一下顶点描述模块啊，什么叫顶点描述模块啊，在pipeline当中啊，需要确定本条管线接收怎样的模型点的数据啊，你不是说pipeline对整个模型的数据进行处理吗？
那么我给你一堆数据，请问？
如何去解释呢？
如何告诉海务兰啊？
谁是谁？
里面是干嘛用的？
怎么去使用这个数据呢啊？
那么数据我们分为两种类型啊，一个是叫做e live的data啊，那么在模型当中每个顶点都有多种不同的属性，比如说位置normal法线对吧？
6v。
那么都放在同一个数组，我们就称为interleave了。
就比如说我们其中啊，一个顶点的数据就是这样子，由什么由八个float类型的数据啊，构成前三个表示它的位置xyz，中间表示它的normal xyz，后面是它的uv值啊，这样子我们把三种不同的数据合在同一条数据当中，这种存放方式啊，就是它的。
还有一种存放方式是什么呢？
是每个顶点有不同的属性，都在不同的数组里面存放啊，就比如这样子，我们把它拆开，可能专门会有一个大的数组，对吧？
存position那么还有一个很大的组来存normal，还有一个大数组来存uv。
啊，把它拆成三种不同的数组，那么这是按inter leav ve的啊，就是分散式的OK，那么不管哪种数据啊，被送入gpu的显存buffer，那么gpu如何理解这些数据，说白了管线当中啊，如何处理这些数据呢？
我们看一下，那么就需要用描述的这种方式啊，首先叫顶点绑定描述，叫vortex funding啊，vortex funding我们比较容易解释的啊，是先拿这个分离式的，也就是说每栋数据啊，分为不同的数组，这种方式比较容易解释。
每组零点数据都在gpu当中生成一个buffer啊，也就是说position生成一个buffer，冒生成一个buffer，然后呢，它的这个uv生成一个buffer，那么这多个buffer的数组送入到command buffer当中。
啊后呢，所谓绑定点就是数组的编号，告诉p如何使用command buffer到buffer啊？
什么意思啊？
大家看一下。
我把比如说我分布分离式啊，分离式的话呢，我有三种不同的数据是吧，我把一所有啊，这个模型所有的顶点数据都放到这个buffer里面啊，这是一个基础buffer，然后把这个模型数据里面所有顶点的所有normal数据啊都扔到这儿啊，把uv数据都放在这儿啊，因为你毕竟是分离式的，对吧？
可以生成三个八分。
生成三个buffer之后呢，我接下来要做绘制啊，我们之前说做绘制的时候是不是要提交命令啊？
对吧？
提交命令，然后呢？
我们就会把啊这三个buffer在我们后的端的handle啊，把这三个buffer在后四个端的handle组成一个数组。
把这个数组呢输送给command buffer去执行啊，去绑定上，说白了我当前绘制的就是这个模型啊，这个模型呢，这三个buffer在这放着呢，那么之前呢，我们一定要先设置啊，在绘制之前我们肯定设置了pipeline，对吧？
设置了pipeline。
那么其实它就告诉了排放量如何使用，怎么告诉的呢？
啊，这个是这样告诉的啊，它说。
第零号位置绑的是这个position，它是什么样子的？
那么第一号位置绑的是冒什么样子？
第二号位置绑的是uv啊什么样子？
其实就是一个数组的编号而已啊，数组的编号OK，那我们在我们在程序里面才能看到啊，看会更加详细，那么注意一点是此时的pipeline，只是知道如何获取拿到的是描述信息，并不是八号人。
啊，这句话什么意思啊？
在这样一个过程中啊，在这样一个过程当中pipeline里面，它存放的这个所谓顶点描述模块，它只是一个描述。
它会告诉拍夫兰说呃，零号位置有一个啊，怎样的数据一号位置有一个怎样的数据二号位置有一个怎样的数据？
啊，它只会这么告诉你，那它说的是而且而且它会告诉啊，这个系统这零一二这些值它们都是什么？
我太子办的，也就是说都是三种八分啊，三个八分。
是这个意思OK，我们看如果是混合式的啊，混合式的，那么此种类型只有一个buffer，所以直接绑定点就是零了，对吧？
因为数组元素只有一个啊，它会把所有的这三个毕竟是混合在一起嘛，把这三种数据全部都混在一起，放到一个buffer里面。
那么，此时我在提交command的时候，我是不是只用绑定这一个外号就可以了？
对吧？
我不用八八号数组了，那么绑定这一个外号就行，之后呢？
然后我们就只需要什么拉格拉里面进行设定。
啊，告诉法官来说，我目前啊啊就这一个八份啊，它是变化为零，它的绑定半径为零就可以了，但是分开的这个的话，我觉得更好，这个是半径为零，这个半径为一，这个半径为二啊，那么具体怎么设置一个，现在我们只能够感性的认知啊。
具体理性的一个设置方式，一种理解方式，我们只有在程序里面才能看到啊，在程序里面看到OK，接下来还有一个描述是什么叫做顶点属性描述啊？
about tax attribute allocation这样一个描述。
不管是inter live的还是an inter live的data啊，它数据中总是包含position com uv等等的数据，那么在当中得承接这些数据吧，你看。
这个这一段它就承接了position跟color，这两个数据对吧？
那么，所谓的attribute location啊，attribute location的意思就是说啊，告诉他不同含义的数据映射到谁点，不同的location上，那比如说啊，还是回来我们看，比如说这个buffer里面的数据，我们把它理解为position，那么这个buffer里面的数据从这个开始，每三个我取。
出来算算作一个position对吧？
每三个取出来算作position，那么这件事呢？
我就告诉啊，那么零的这个位置，你从零的这个位置的二里面啊，你去取吧，那么每三个位置，每三个位置，每三个位置啊，就取出来了。
然后呢？
我告诉他是location为一的，这个地方有color，那么我在输入的时候呢，我会告诉flan啊，说location，比如说这个number是吧？
它的那数据location为一。
那么，它就会从location为一的这个地方去这个buffer里面啊，这个位置上去取数据也是每三个取一个，每三个取一个，但是理解为这个坎儿就输送给它了，所以说attribute location啊，这个重要的东西其实是什么呢？
其实是啊，跟shade相关联的啊，跟shade相关联的。
数据映射OK，那么总结啊，顶点绑定描述与顶点描述加在一起，就构成了pipeline当中的顶点描述模块，那么我们还是要注意啊，这里只是做做了什么呢？
对期望输入顶点方式的描述。
就是我希望你按照我这种描述方法去在command buffer里面啊，去输入这些buffer啊，顶点啥的，它并不是直接绑定了某一个buffer或者没几个buffer，因为拍出来它是一个模板，它是一个渲染模板啊，它是一种渲染的描述和规则而已啊，它并不是实际的，这样一个渲染环境。
或者说实际的选数据相关的东西啊，它只是一个模板OK，那么这里我们有一个东西是吧？
顶点描述设置OK，那么我们这节课先讲到这里，后面我们继续来讲。

