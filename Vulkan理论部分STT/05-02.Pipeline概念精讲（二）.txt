05-02.Vulkan-Pipeline概念精讲（二）

各位同学大家好，上节课呢，我们讲完了顶点模块啊，这边呢，可能还有点模糊啊，我们需要对照程序进行讲解，会更加清晰。
好，那么接下来呢？
是pipeline的图源装配描述模块啊，什么是图源装配呢？
对输入的顶点，它到底是构成了三角形还是直线进行设置？
一般设置的参数呢，都会是这几个啊，是polarity的point list，它就是一个点集啊，就是画点而已是吧？
line list就是线的集合，这边triangle list就是三角形的集合，那这边呢？
还有两个是line strip和triangle strip。
我们结合图形来看一看。
首先line list那么假设我们输入四个顶点，零到一为一个index 2到三为另外一个index。
那么，它绘制的方法呢？
就是这样子了啊，会生成两条直线，但是如果line strip的话，那么就会连续进行绘制啊，它是连续线零到一绘制一条，一到二绘制一条，会使用上一个的最后一个末尾顶点。
啊，使用上一个的末尾顶点OK，第二个我们看一下shortlist triangle list呢，也是一样的啊，是以每三个为一组进行绘制三角形，这是triangle list，当我们看四个点。
前三个点已经绘制成了一个三角形，但是后面这个点它没有与它配合，对吧？
如果你还有两个点三四五，那就还可以构成一个三角形，但是呢，对不起，后面已经没有了，于是乎这个点就被落下了，就绘制不出来了。
但是triangle strip就不一样了，triangle strip呢？
它是这样做的，我们首先零一二还是绘制一个三角形像照这个顺序啊，零到一一到二二了啊，这样一个包围顺序。
然后呢，它会从这个三角形的三个点里面取最后的两个点啊，最后的两个点也就是一号点和二号点，然后由一二再到三再到一再绘制一个三角形啊，所以零一二。
是吧，一二三就是两个三角形了，所以说landscape称为连续三角形，就这个意思。
它可以复用顶点啊，那么很简单，复原装配模块，我们也拼装到了我们的派克拉里面啊，接下来我们再看视口剪裁模块。
这个就很有意思啊，视口是窗口中画布的大小，通过拉伸放缩进行适应，那这句话不太好理解，一会我们通过图片来看啊。
剪裁区域什么意思呢？
比粗暴是吧？
区域外的直接剪裁就不绘制了啊，这个很好理解，首先看视口，我们如果把视口与窗口的大小设置为一模一样的，那么就是这样一个效果。
如果我们把视口啊，把它的宽度给剪成窗口的一半，也就是这么宽到这，那么它会通过拉伸放缩去适应它啊，也就是说对于我们的这样一个啊，绘制或者说f8号来讲。
它就会把它展开，在我们仅有的这么大的一个视口上面啊，就是宽度为一半的这个视口上面把它拉伸放缩贴在上面，那么它贴的是什么呢？
是那个surface对吧？
贴的是那个surface相当于通过surface来调节啊，就变成一半儿。
那剪裁是怎么回事呢？
不剪裁还是这样子对吧？
如果说它的宽度，也就是说剪裁的起始点，我们让它从终点开始啊，一直到它的。
这样一个点就从这个点一直到这个点，构成一个矩形，从左下角这个点到右上角这个点，构成一个矩形，这个区域内的才可以绘制这个区域外的就可以剪裁了啊，但它是个硬剪裁。
所以说剪裁跟是分别是不同的功能。
OK，我们又加上了视口剪裁设置，接下来我们看光栅画设置模块啊，光栅画微地图的图源如何离散成为光栅画的像素风格啊，中间呢，有很多的设置的细节，我们就不在这展开讲了。
重要的讲讲就是剔除啊，剔除是在光山画里面设置的，大家还记得剔除吗？
背面超我们的就被剔掉了，对吧？
所以说呢，它有两种设置的参数，一种是car MOD就是设置剔除掉正面儿还是剔除掉背面儿？
一个是font face设置如何定义正面啊？
你说要剔除掉背面，请问什么叫背面对吧？
好，我们看一下，假设通过font face设置，我们让顺时针链接的三角形为正面。
那么，我们看这个三角形哎，它是逆时针连接对吧？
零连到一，一连到二，二连到零，那么这样一个三角形就是背向朝我们的，那么我们呢？
再把Carl MOD设置为背面剔除，那么这个背向朝我们呢？
就会被剔除掉了。
那么这个的话呢？
你看它顺时针的对吧？
零一二哎，顺时针的，所以说呢，就正向朝我们这个就需要保留了，好那么这边我们光栅画设置又加进来了。
接下来是颜色混合，什么是颜色混合呢？
它规定了同一个像素点上各类物体的图源啊，大家还记得什么是图源，什么是像素啊？
图源是什么呀？
我们假设要一幅画吧，然后呢？
背背景是一座山，前面有一个人，人前面放只狗，那么它们三个东西啊，总有相重叠的地方，那么重叠的地方呢，上面这些每一个像素，它是不是都有三种图源呢？
对吧？
那么每一个像素点上都会输出背景的图源，人的图源。
和狗的图源对吧？
那么所以图源跟对中啊混合成为一个像素点上的颜色，这个意思那么如果说这三个东西啊，它们都是rda的，这样一个像素格式也就是存在阿尔法值。
那么，我们如何对它们进行透明度的呈现与颜色之间的混合呢？
我们就给出一系列的参数，比如说source color blend factor这个玩意儿啊，这玩意儿是什么呢？
即将绘制上去的颜色称为source color，举个例子。
背景，我们已经绘制完了，在背景前面呢？
我们想绘制一个半透明的，一个蓝色的玻璃，那么这个即将被绘制上去的半透明蓝色玻璃就称为source color，就是源头color。
OK，那么另外我们再看本参数规定它乘以什么数，那比如说啊，我们用vk blind a factor source阿尔法，那么它的意思就是说啊，接下来我即将要绘制上去的，这个颜色就是source阿尔法需要乘以自己的阿尔法值。
得到一个结果，先放在这儿啊，这么个意思，然后dest color land factor已经绘制在了buffer上的颜色，称为dest color啊，就是说比如说还是那个例子，对吧？
已经背景已经绘制到buffer上了，接下来再绘制一个蓝色的玻璃，那么已经绘制到buffer上的这个背景。
它的颜色被称为s color，就是目标color，那么本参数规定它乘以什么系数，比如说vk benefactor one minus sa uss alpha，那么它乘以的数就是一减去三。
south啊，就是即将绘制上去，那个蓝色玻璃的阿尔法值一减去south阿尔法，那么用这个乘以这个，那它俩如何混合在一起呢？
就是color blend的operation啊，就是规定计算好的颜色啊，如何运算产生最后的颜色值。
比如说v kn的operation，add就把它俩呀，最后得到的那两个结果就相加，就得到了最终的那个什么最终的那个颜色值啊，就是那个像素的颜色值OK，那么我们啊，现在又加上了一个模块诶。
怎么样？
我们没有加上模块啊OK，先这样吧，就是反正先不加了，对吧？
OK，最后是uniform设置与深度模块啊uniform和深度啊，都是比较复杂的课题，后面讲解是吧？
现在不讲解了，所以说这么一大堆的设置啊，我们就都齐全了啊，当然这边还缺少一个blend啊，缺少一个混合。
啊，颜色混合uniform和深度啊，它是比较复杂，复杂在哪儿呢？
你像uniform，它有很多种啊，而且对于我们来讲啊，它有很多个buffer，对吧？
它可能四五张图片或者两三张图片轮换去显示。
那么，其实我们要给每一个这样的一个stop change image去乘一个对应的uniform，那么但是仍然还有有有的有利form是不需要给每一层层的对吧？
比如说图片，它是只读的，不需要设置。
那就不会产生冲突啊，不会产生全局冲突，那么所以这里面有很多复杂的东西，那对于深度设置同样啊，深度设置里面还是要生成图片，还是要深度八块等等，所以说我们在这就不讲解了OK，那么我们今天就讲到这里。

