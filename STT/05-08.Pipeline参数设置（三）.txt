05-08.Vulkan-Pipeline参数设置（三）

好，那么我们这节课呢？
我们看看设置啊嗯接下来呢？
我们该设置的是关于多种采样啊，多种采样，现在的话呢，我们先禁用啊，把它to do一下。
啊to do多重采样啊，我们这边呢，先设置它一些默认的值啊，后面再讲再做讲解啊呃，它的am叫做三号state啊啊，那第一个是它的三炮十灵龙啊，十灵灵宝的boss。
好，拷贝一下。
第二个rus ter radiation samples啊vk叫做sample count 1啊。
采样一格即可，然后呢，是它的mean sample shading零点零。
然后是它的p sample mask=cool。
然后是它的阿尔法to convert啊nipple。
最后是阿尔法y等于。
全都进走啊，全都进掉好，那么接下来啊，这边我们再写一个to do啊，这边还属于后续内容to do什么呢？
就是我们的深度。
深哎啊，深度与模板测试啊，这块的设置是我们图先不设置它好，接下来啊，我们直接设置一下颜色盒啊，颜色盒呢，这边我们暂时解不开，因为我们的颜色是rgb的啊，没有rgb a暂时啊，所以说在这边也不开它，我来设置。
可以关掉就好了，不首先是它是个state啊，它的。
呃，color right mask等于啊，什么是color right mask啊？
我们先写上第一个看看啊vk color呃component，然后叫r啊component。
rb it啊，看一下。
啊，有这么多种是吧？
还有这么多种好，我们继续啊，这个我们它的含义啊，在这要写一下啊，这边这样呃，怎么说呢？
这个是啊，就是颜色混合掩啊，掩码就是说呢，得到的混合结果与呃，就是说按照通道与。
这个掩码进行and操作输出啊，比如说这个意思，那么它到底输不输这个颜色通道啊？
那么我意思可以把这个颜色通道关闭对吧？
好，那么我们现在是把这些颜色通道都打开啊？
color component rg。
然后我们再把它vk color component rgb，然后这边我们换一行吧？
这样清晰一些啊，然后vk color ctrl啊，把这些都可以进行输出啊，这个意思，然后呢，我们是否开启颜色混合啊，我们先不开启啊blend叫做blended neighbor啊，等于。
你可以boss啊，我不去，你就把它然后呢，再设置一下嗯source color blend blend啊，这个blend什么意思来着？
就是说用怎样的数值与我们的原颜色，也就是技巧画上的颜色相乘啊，用什么呢？
我们这边用blend。
factor one啊，就是说100%都是它，然后呢，我们的desk color blend factor等于什么vk blend factor？
OK，zero这零就不管下面了啊，全是上面的，那就不符合了，然后呢，它的color blend operation=vk叫做blend operation，add相加即可。
然后呢？
它的前面我们还有针对阿尔法的操作啊，最终输出的那个一像素上啊，它的阿尔法是什么样子的？
阿尔法怎么运算的？
我尔法我们等等于vk。
大家打烂是吧？
哎，我把它搞起来了。
都差不多啊，不叫d斯塔阿尔法等于这个zero啊，这个是阿尔法ban operation啊，等于这个对吧？
等于这个好，然后呢？
我们设置一下blending它的总体参数。
对m type line。
有一个叫mbl end state这俩伙啊，这blend state呢？
它的color好呃，那么在这里啊，我觉得先给大家讲清楚啊，关于b的一个问题啊，关于b的一个问题，那么刚才我们讲了这个地方是设置了它正常的颜色的一些计算的通道系数，对吧？
包括说了啊，就是哪个通道输出哪个通道不输出是吧？
现在都输出。
然后呢？
这边就是关于美通道的计算方式啊，唉，很多同学会问啊，这边为什么有个blend state呢？
上面已经设置的很好了，对不对啊？
并不是的啊，并不是的第一点啊blend有两种计算方式，唉，两种计算方式，第一种如上所述啊进行。
阿尔法为基础的计算啊，那么诶第二种进行位运算啊，第二种是进行位运算的。
那么位运算什么意思呢？
就是啊，比如说上面呃，下面我们的背景上已经有了一种颜色rgb a，那么你上面呢要绘制另外一种颜色来进行叠加啊，那么如果我们开启了e运算方式，就是在fale nd AR state里面设置的这种位运算方式的话啊，那么就会变成什么样子呢？
它的rgb a。
啊，这四个量会与下方的这个我们背景上的rgb a一一进行位运算啊，要么就是and要么就是一或等等啊，要么就是直接copy对吧，这样子，所以说blend方式有两种啊，那么下面这个就决定是否要开启逻辑运算啊？
那么如果。
二如果开启了logic operation的话，那么上方设置的阿尔法为基础的运算。
是零啊，就失效了OK那么另外。
我们还要考虑一点啊，那么就是color right权限啊，这个掩码仍然仍然有效啊，即便开启了logic。
那么logic operation好，那么我们还需要给大家澄清一个问题，四啊，就是说在这个blend state，如果我设置了啊，它的logic operation不开启，那么就是用上面这种方式对吧？
但是呢，在这里面啊，会将上面的这个attachment state。
作为一个数组的形式啊，传给这个blend，那么为什么是数组呢？
因为我们啊，可能会有多个frame buffer输出，对不对？
就比如说啊，我们如果开启了before的rending，就是延迟渲染，就这一帧呢，我们是不去显示到屏幕上的啊。
那么可能，我要输出三个八块的信息，我们把啊跟阳光光线有关的信息渲染到一张复印八块里面，我们把位置信息渲染到第二张复印八块里面，把法线信息渲染到第三张复印八块里面，对不对？
那么。
这三张buffer啊，是同时啊，一个f给它输出的，那么这个时候呢，可能诶，每一个free buffer按照顺序去使用，它们上面要知道各自的什么，各自的attachment。
state啊，各自的test state一一对应啊，所以需要多个，所以可能需要多个什么blend attachment。
啊，这么个道理OK，那么给大家说完这个东西之后啊，我们继续设置我们的信息在这里呢，我们它的这个叫logical operation啊enable我们给它先干掉啊house掉上面也一样，也都force掉了啊。
好，我把这个。
拿过来它的logical operation啊，就是说如果开启了逻辑运算，那么它会用什么样的运算方式？
我们这边先给默认搞一个吧，叫logic。
operation.copy我直接切过来。
然后呢，它的attachment count等于多少在这里啊？
就是说到了我们最后一个吧，有多少attachment这边我们把它放到一个数组里面来个它。
呃，叫做。
好，它是这个类型拿过来。
这个类型的一个数组呃blend attachments。
好，然后呢？
在这里啊，我们把blend push一个我们里面的blend哎。
嗯，想一下嗯，这个过程的话，我们最好不要在这里做，不要在这里做啊，这个我们就不在这做了，我们在哪做呢啊？
因为这个属于内部的一个运算啊，叫彼此之间的内部运算，对吧？
我们把内部这件事啊放到排破烂里面来做会比较好啊。
这个就是啊blending在这里，我们进行最后的设置啊，就是blend state。
它的啊，这个把我们其他搞过来吧，就关于okay这边没有什么可考的啊，好它的呃，叫做catchment count。
等于什么啊？
等于什么？
那么这边我们也做一次改造啊，做一次改造怎么改造呢？
这边啊，我们原来存的是什么？
是不是blend attachment state对不对啊？
存了这么个玩意，那么现在呢？
我们把它改成一个sdd vector。
诶，因为我们可能会存多个attachment state，对吧？
多个好，然后呢？
我们在这个地方，我们要加上对外接口了啊void to呃，叫blend attachment。
mentm mn t它是ment state。
啊，这样嗯OK，然后复制点的是什么呢？
是个这个人是吧？
这个东西啊，那这是一个描述信息对不对？
那是一个const。
它的引用啊，叫做blend attachment。
好，然后我们把它进行复试m呃blend attachment stay这个s啊stays这个东西它。
点儿push back，直接把它装进来啊，装进来谁呢？
blend attachment set。
好整理一下。
唉，我们这样来做啊，这样的话呢，给外界留一个设置接口，那么我们在application里面这个地方啊，就不要这么去设置了，对吧？
哎，就不能这么设置了，我们该怎么办呢？
我们应该这样做啊，在pipeline啊上面好像修过东西啊pipeline就这边也会出问题吧它的。
啊，这边没有问题，那么我们在pipeline里面把它类型拿出来叫这个对吧？
color color color那我们去到application里面这里啊。
就直接做一个临时的这个东西啊blend attachment。
然后给它做一个这个，然后blend attachment给它设设置一下啊，直接拷过去。
替换掉诶，这样。
这个方便很多，对不对？
okay，好。
看一下检查检查没有问题啊，那么把它设置完毕之后呢，我们干什么呢啊？
我们这么干嗯，我们这样做啊，叫做m pipeline。
push哎，把这个blend attachment给它拿进来OK，这样的话呢，我们就有了一个attachment，对吧？
顺序啊，你这个跟frame buffer的顺序稍微一致一下，是不是嗯就可以了，然后呢，在这边我们设置一下它的这个可对外暴露的选项啊，就属于可对外暴露选项。
那不可对外暴露选项怎么设置呢？
就是在这里面，我们就可以去大大方方的在这儿设置，对不对？
count等于什么呢？
这是个什么类型啊？
int 32好再转一下，它可以count。
x32个七。
那这边就是l attachment plan attachment，对吧？
它的size。
诶，这样就比较好了，然后呢？
它的stata的p attachment呃，它这个等于blend。
attachment states ta ta ta.好啊，那这样的话呢，我们在build的时候啊，把这两个量把这两个状态量相连接，对吧？
在这相连接，然后在外界的时候呢，我们只能先去设置一些这些东西啊，只设置这些东西就好了OK，那么这就是blend设置啊blend设置，还有一个东西在哪呢？
这个东西是常量的设置啊，混合常量。
它常量的设置呢？
是这样嗯，它的嗯，叫做blend contents啊，它的零号我们给它设为零点零f啊，同样的，这个东西要进行把撒进四次rgb啊。
这个一号二号三号啊，这是干什么用的呢啊？
这是配合上方呃，配合attachment吧？
attachment叫做blend attachment，dot叫叫做factor与operation的啊，怎么配合的？
具体我们看一下这个source color protector，我们进去看看啊，它其实是有一个叫做。
这啊，刚才的阿尔法，也就是说什么呢啊，我可以不去理睬你输入的图片啊，或者是什么东西里面的这个阿尔法值，而直接它作为混合因子，那么我可以设置source blend factor state，也就是说我去用那个constant里面设置的值来做这个事。
来乘以我呃source的color，然后呢？
我还可以用这个y minus constant阿尔法哎，用一减去constant那个值乘以什么？
我们的dest这个color啊，再把它俩进行operation相加是这样子啊，所以说呢，我们现在不需要这么去做对吧？
不需要做全局的这种设置，所以把它搞成零了啊，搞成零就好了。
okay，看下时间好，那么这东西我们下节课继续讲。

