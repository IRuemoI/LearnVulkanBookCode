04-07.Vulkan-交换链基础特性获取

交换链最后一概念给大家先讲完，然后我们来编写程序，首先啊，交换链关心的问题，我们关于基础特性没什么好讲的，就是这些东西。
表面格式给大家讲完了，那么所谓呈现模式啊，需要给大家讲清楚它是干什么的，我们看呈现模式是用来规定显示推列当中啊，如果有多个已经渲染完的s mop帧啊s里面的帧输入的话，我们怎么去做显示啊？
第一种显示方式叫做immediate啊，immediate渲染完一张图片直接送去显示啊，根本不管你什么垂直到引期啊，也不管你什么啊，针不撕裂不撕裂的问题对吧，直接去显示了，当然就会产生撕裂是吧？
第二种fifo这种模式先进先出，渲染完毕的图片立即送入队列，那么呢，它会维护一个啊，先进先出的队列，先到的会先显示，那么如果我们的队列满了满了之后呢，渲染程序就会堵塞住，等着啊，等上一帧显示完了，然后队列有空了，它才会把我们的图片压进去。
那每一次呢，在垂直效应期间啊，进行一次显示图片啊，比如说我们队列里面有三张图片，第一张图片都在被显示显示完毕之后再进入到垂直效应期，才会把第一张图片弹出，然后显示第二张图片，此时进入第四张。
接下来是叫做relaxed啊fifo的relaxed什么意思呢？
就是说啊，它跟这个ffo其实在机制上基本相同，但是不同的是什么呢？
如果队列是空的情况下啊，新图片会直接送进去，而且不用等待垂直消隐啊，所以说它有可能会造成什么造成撕裂啊？
凡是不等待垂直效应，直接就去送去，显示的都会造成一定的撕裂。
接下来是叫outbox啊mailbox，它是比较好的一种显示方式啊，与fifo一样，仍然是有一个队列，但是呢，当它的队列啊就是满的情况下，新来的图片会替换队列当中的图片，这样的话渲染效率会更高一点啊，因为渲染那边就不用等了，不用block住了啊，不用阻塞了。
OK，那么就是这几种显示模式。
那么接下来啊，我们来看一看程序啊，我们看一看程序在sy里面啊，我们先做一个结构体，那么这个结构体是用来干嘛的呢？
这个结构体就是就是用来存储啊。
咱们s里面啊，所有获取到的这三样信息啊，就是呃，看一下这三样信息啊，大家记住基础特性美格式啊，可见呈现可可用呈现模式啊，好，这边我们写一个dot吧是吧？
叫做stop champ。
呃perl啊s up ptioninfer吧。
OK啊，这个名字这样改吧sop chen support infer啊，就是说它支持的信息啊sop chen支持什么样的格式支持什么样的东西啊，第一个是什么呀，这是不是它的这个所谓的？
基础特性，这是叫做vk surface啊！
vk surface capability s kh 2。
这个啊，这个叫做caps caps是什么capabilities？
第二个是什么呀？
第二个是说一个s个队列，这个队列里面有什么呢？
是vk surface surface surface form at thr啊，就是表面格式，它支持很多种表面格式，对吧？
我们要这种来来用啊。
for max第三种还是vector里面放着什么呢？
叫做vk present呃mode k HR就是我们刚才刚讲的，它到底支持多少种？
这种present mode啊，显示设置啊，就是这个队列。
那么m present mose。
OK，那么接下来呢，我们就要去做一个函数啊，这个函数是干嘛的呢？
是获取这个设备里面所支持的这三种东西的一个集合啊，把它们都获取出来，然后我们再挑选是吧？
获取出来再挑选。
然后呢？
这个返回值啊，我们在这加个函数啊，它返回值是一个stop chem。
啊，support infer，然后呢，叫做query swap chain support，哎，up port infer。
OK，传进来的参数应该是什么？
应该是一个device，一个surface对吧啊，然后说那个，然后就是一个一个呃呃，看一下啊，这边我们已经有了device和surface了，那我们这边就不需要传入啊，不需要传入参数。
那么，我们去到swot chain里面，先把它写出来啊，这边swot swot chain support in vers wotcha in。
query OK，这个函数的话，我们什么时候调用呢？
我们应该是在sop chen这样在它啊构建的时候去调用啊，构建的时候去调用，所以说这边有一个sop chen的，一个sop chen。
support infer=query infer好拿到对吧？
然后在这边呢，我们就开始去查询了啊，就看一看底下有什么样的表面特性呀，有什么样的一些东西啊，等等啊，首先第一个什么第一个基础的特性对不对？
基础特性。
叫做vk，我们做一个注释啊。
获取基础特性。
啊，叫做vk get physical device surface capabilities的khrj。
那传输的参数是一个physical device啊m device，用它get physical device啊，拿到它，然后呢，还需要传输一个surface啊m surface。
get surface，最后再需要传入一个capabilities啊，那么这个这个东西呢，我们要先把它声明出来啊，声明一个swot chains support support info的一个实例。
support然后呢，叫做啊infer OK，然后我们啊这个infer的capabilities啊，给它放进去，这边应该是一个引用啊，因为它可以把值复到这里面OK，这样基础特性，我们就获取完毕了，那接下来的话呢，我们要获取的是啊，表面知识格式。
获取表面支持格式格式好，怎么获取呢？
还是老套的IE 32 MT啊，叫做format count=0，然后呢vk get cz call。
device呃surface format k HR啊surface formats k HR，然后呢，仍然传入m device，get physical device。
然后第二个传入的是什么？
是surface啊m surface get surface那第三个的话就是一个。
啊，一个看一下，那第三个是它的数量啊，数量就是说format count。
接下来的话呢，我们应该传入到一个一个存储的一个地方啊，但是我们仍然是不知道它的数量是吧，所以拿有的啊，先拿到它的数量才能开辟存储空间，才能获取出来啊，才能获取出来OK，那么接下来呢？
我们要看一看，如果呃format count诶format count不等于零的情况下，也就是说里面有啊，有很多个事，那么我们infer的呃formats，然后。
resize一下，我们预留出来多大的空间呢？
预留出来这么大的空间啊？
预留出来这么大的空间去装这个表面格式，然后我们再调用一下这个函。
OK，然后此时啊，就可以用infer的这个把它点data点进去啊，这样会被装到这样一个f里面，对吧？
装到f里面，另外的话呢，我们接下来还要去查询呈现格式，呈现格式啊OK？
获取呈现模式仍然如此啊。
int 32杠七叫做present mode count。
那么等于零。
然后呢，用vk get physical呃device surface present mode哎呀，这个是真的长啊是吧？
但是这些都有必要，然后写一遍啊，将来大家都就都能有自己的脚步了啊。
device get physical device，然后呢，传入surface m surface get surface，然后再传入这样一个数量啊，present mode count。
然后仍然是null，如果呢，present mode count不为零，那么说明什么呢？
说明我们是有值的，有的话呢，仍然是infer的present modes，需要resize一下。
resize resize多少个单位呢？
resize present，那我们看一个好，这时候把它真正的获取出来。
好获取出来啊，然后传入的是infer present modes的贝塔，好把所有的都安装完毕啊，我们就把这个信息回传一份儿给它回回去啊，好这样的话呢，我们就已经拿到了啊，这个queries放在里面就拿到了。
我们现在运行一下，看一看都会存哪些东西啊？
好到这，首先获取基础表面特性啊，我们看一下。
在infer里面这里啊。
呃，它的cap base里面啊，最小的image count啊是啊，两个最大的应该是看的是八个，也就是说我们的SP渲染其实可以做八个啊，这么大做八个啊，八个图片啊，共同来来来做显示啊来做渲染。
那么current accident，它的长宽是800×600啊，这个没啥问题，然后呢，小的是800×600，最大的是600啊，因为已经设置好了，这没问题。
然后还有一个传送啊，等等吧，这系列的信息就都获取出来了啊，然后继续看一下它所支持的格式，哎，走到这格式就获取出来了，我们看这个是啊，在哪里呢？
在诶，这个。
infer里面format啊，它有三种格式啊，三种格式，第一种叫做二八啊，就bga是吧，然后是呃iPhone啊up hone啊UNO UNO UNO啊，然后是color space。
这个是s rgb，我们看color space的话都是s rgb，能理解啊，都是s rgb，能理解，也就是说默认的开启s rgb的一个一个解释模式啊。
然后这边有两种，我们前两种比较关键啊，一个是an nomo的这么一个格式，第二种是一个sr 10啊，一会儿我们是其实之前都已经讲过了，对吧？
好获取出来，下面之后我们看一看它的present model有哪种啊？
诶present mode获取出来了，看一下infer，然后present mode有四种啊哇，它支持四种，一个是ffo，一个是relaxed ffo，一个是mailbox啊，可以一个是immediate我们讲的，它都支持啊，没有问题好。
f5。
然后存储啊。
可以，那这样的话，我们就获取到了所有的课程，接下来下节课我们来编写对它的查询和挑选。

