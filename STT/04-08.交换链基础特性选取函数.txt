04-08.Vulkan-交换链基础特性选取函数

啊，通过查询的形式找出了我们的physical device所支持的关于subtend所有的信息，包括它的capabilities，还有表表表格式，还有我们的呈现模式啊，我们这节课开始就要开始在这些东西里面进行选择啊，我们要先接口给到接下来创建我们的交换链来。
使用啊，第一个接口是在这个表面格式里面去选择一个适合我们的格式啊，那它的返回结果是一个vk surface form at HR这样一个东西。
叫做choose surface format。
那么传进来的呢？
就是这样一个波。
诶，看到了。
叫做available for math OK，我们接下去实现这个函数，把它放在后面吧。
带个脑袋啊sop chin。
okay.那么，获取啊，从这里进行选择，那么现在给大家提一个问题啊，我们也回顾一下这个事实啊，我们现在在选什么？
请问大家，我们现在在选什么？
什么是表明格式来的啊？
那么是不是就是这样子？
我们如何定义交换链当中这些图像啊？
这些图像呢？
如何定义它们的rgb的一种格式对吧？
但是s rgb去解释啊，还是说呃用rgb的这个呃normal的形式去解释啊等等是吧？
就是这个地方。
如果对这块知识还不太了解的同学啊，可以翻到前面的课程再好好看看理论，再开始我们的这个编写啊OK第一步，如果只返回了一个。
叫做未定义的格式，那么就没有首选格式，我们自己做一个啊，我们自己做一个怎么看呢？
这样子。
如果available诶。
format它的size等于了里呃，等于了一啊，就只有一个，并且available for我这唯一的一个它的格式哎，它的for。
net啊，竟然是什么呢？
竟然是vk format i defined，也就是说它根本就没有定义啊，那么我们得了啊，就自己返回吧，我们自己定一个格式给到它，我们要用什么vk format？
啊bgras rgb啊，用这种格式，然后呢？
它的呃，这个是什么？
这个是我们这张图片的格式是一个bgr的，这么一个组织方式，并且呢，我们希望啊，在fragment shift输出之后把它转化为s rgb颜色空间。
那么，速录显示引擎的时候，我们的color space是什么呢？
是不是也是vk color space？
啊，叫做s rgb。
run linear data，这个对吧？
你给出去的是一个sgb，我这收到的也是一个s sg bok，如果不是这种特殊情况的话啊，那我就一个一个看到刀口。
呃叫做available format等于呃等available format啊在available formats里面就一个一个遍历啊，那么如果当前这个available format的format。
等于了什么呢？
等于了这个。
啊，等于了我们的sx二八d八二八g8r8a8啊，这个格式那么，并且它所支持的啊，这个color space。
是等于了我们的这样一个color space，再次强调这个color space什么来着？
是显示引擎如何去理解我们的图像？
这个是定义我们的图像啊，就是fave n的输出之后首要做成为啊，做成为sld。
如果找到这种情况下啊，我们就直接给它输出啊available format，我们要的就是这样的好，最后如果啥也找不着啊，我们就把available format打头一个处得啊，这样子我们就完成了choose format啊，choose service format这样一个功能。
接下来，我们要选择它的呈现模式，就是这个东西。
那么，我们自然而然选择呈现模式的话呢，就要返回一个vk present mode k叉。
shoes啊，这个surface present mode。
啊，选一个present mode，那么它输入的自然而然就是这个数组了是吧？
在这里面我们要找一个h。
available呃，叫做available，available presents OK。
那么我们现在知道那边就是现象。
啊，帽子给它。
带过来好再次回顾一下啊，就是这个函数是什么意思来的？
这个函数是选择一个啊，队列的一个作用方式对吧？
队列的作用方式先进先出啊，然后是否去电容垂直效应器啊等等在这儿是吧？
是否也没地儿开啊这种？
OK，那么我们先把不要返回的这个东西写出来vk present mode HR好，那么叫做best mode等于。
vk present no deffo我们先默认是这个格式，然后呢，我们要一个看它到底有没有啊for count auto。
叫做什么呢？
available。
这样子弄的。
在available print modes里啊，选择看一下啊，一个一个看，如果我们当前的available print mode呀，它是等于什么呢？
vk present。
node叫做mailbox，我们最喜欢的这种高性能模式啊，如果等于这个的话，我们直接return。
所以突然。
啊，没了吧啊，找到我们这个返回去就可以了，要的就是这个啊，但如果说并不是它的话啊else if那么。
如果available print mode等于了vk。
present啊，present mode那么present mode。
诶fr fo。
那等于这个的话啊，我们也给它返回。
OK，今年我们可以这样子看啊嗯，由于现在啊这个。
OK，我们这么来看这件事啊，就是说在这边要给大家讲一个特殊的点啊，在这边我们为什么这么写啊？
就是说呢，在设备上啊，只有fifo这一种ffo这种形式啊。
是被绝对支持的啊，其他的话都不一定支持，所以说呢，我们其实比较想要的就是这种啊，这种格式啊，但是呢啊，但是呢，也不一定对吧，因为呢，如果。
如果在移动设备上啊，为了电，为了这个节省电源，对吧？
那么优先选择fifo对不对？
这个意思，否则的话，你不fifo你这边对满了，你不去block，你还从那里渲染是吧？
不停的浪费电，这个意思。
那么，所以这边的话，我们干脆这样得了啊，因为我们是在PC上跑嘛，对不对？
大家注意一点，我们在PC上，所以说我们优先选择啊，高性能模式啊，虽然很耗电是吧？
高性能模式，那如果说我找不到这种模式啊，那么我就直接返回吧。
我直接返回巴塞罗那。
就是说这个ffo。
那这个函数呢？
大家可以根据自己的使用场景啊，去扩展这样OK，那这样的话，我们数字prime surface more啊，我们也搞定了。
我看下时间好没问题。
okay，那么接下来的话，我们要搞的是什么呢？
就是说啊so它含有一个很关键的就是它的capabilities啊，capabilities，所以说呢okay。
那么我们继续啊，就是接下来啊，要选取一个啊，适合于我们当前窗口这么个大小啊，这么个小，我先把接口写出来啊，然后呢，我们一会儿再去探讨一下这个接口的含义啊vk。
an excitant 2，a excitant 2d，然后呢？
叫做choose。
呃，accident这样子，那么accident是由什么来体现的呢？
啊，是由这个玩意儿体现的capabilities啊cons。
cap vo kay，然后我们再取到后面，把它实现出来。
好迈过来啊，这个是干嘛的呢？
这个的话就是我们交换链啊，一定要有它的大小啊，因为交换链呢，有多张图像，每张图像都有自己的尺寸叫宽高，对吧？
那么在这里面呢，我们就要规定啊，这个stop chain它所用到的这个图像的宽和高，那么从capabilities啊里面。
我们就可以进行一系列的操作，看看最终确定一下啊，我们到底多宽多高，首先啊，如果啊，如果出现以下情况，一个什么情况呢啊，那么说明。
这个系统啊，不允许我们。
自己设定这个呃accident。
什么时候呢？
就是这样一个情况啊，如果type a它的。
current accident呃，它的位置如果不等于等于什么呢？
icd numeric damage。
按int 32杠七。
的max。
这个啊诶。
这里有一个。
不等于max啊，等应该是个括号啊好，那这句这句话什么意思啊？
就是说啊，如果我们获取的c abilities里面的这个变量的位置啊，就current current accident的位置啊，它理应等于这个数值啊，这是一个很特殊的设定，这是挖掘系统的一个很特殊的一个用法啊。
那么，只有它不等于这个的时候，说明什么就不允许我们自己去设定这个s的大，这个图片大小了，那结果不允许的话，说明什么？
说明它确实有自己的呃，这个要求呃，自己的这个长宽要求，所以说我们返回。
cap AB is的current accident啊，你这个y你这家伙的这个with啊，不等于这个，那你就确定值了，全部就得了，就用它系统规定的了啊，那么接下来的话要注意啊，由于高清屏幕情况下啊。
比如苹果，那么窗体的啊，这个窗体的坐标大小并不等于像素的这个长宽啊。
窗体坐标并不等于像素的宽，这个大家如果做过相关开发应该知道啊，那么既然不不一定等于的话，这边啊，我也不一定面对什么样的屏幕，对吧？
也不一定面对什么样的屏幕，因为中体是窗体，像素是像素，窗体是800×600，但是像素里面一个对吧？
一个窗体坐标点上面像素可能很多。
啊，那么既然这样的话，我们统一交给gr fw啊来进行处理，我们来获取一下当前这个窗体啊，它的所代表的真正的长宽的像素单位啊，像素单位的长宽，那么with。
哎，我打了一个这个。
OK，我们调用gls w叫做get frame offer size。
那么，传入首先window。
get okay，这样get window好，然后传入宽度。
高度获取一下，获取完之后呢？
我们这时候就拿到了啊，我们当前这个窗体，它真正以像素为单位来讲，而不是以窗体坐标为单位啊，以像素为单位来讲，它的宽高啊，拿到这个宽高之后啊，我们做一个accident。
啊vk accident rd啊，叫做actual。
accident等于。
这边我们cast一下啊，static cast按int 32杠七是吧？
然后宽度同样。
高度OK，我们就组了一个accident啊，组了一个范围，然后呢，我们来好好看一下啊，这个范围跟我们当前capabilities里面的范围的一个关系啊，就是说c abilities里面啊。
这个capabilities里面拿这个。
它是有自己的max image accident和它的命image accident啊，就两个限制对吧？
所以说我们所知的长宽并不能超出它的限制啊。
规定在max与me啊me之间okay怎么做呢？
actual。
accident它的宽度等于首先我们把它啊，与最大的比一下，它与最大之间应该取什么？
应该取最小的那个对吧啊，与最大值之间取最小的那个。
它的max image image哎image evidence好。
额度与我actual。
唉，比我当前设定的这家伙宽度之间，我找一个什么找一个最小值，此时得到这个值一定是啊，一定是两者之间最小的一个，随后呢，再与最小值找最大值啊ftd。
max那么是以谁找呢？
max。
呃，叫做type abilities啊，me accident face，okay？
它俩之间得最小值，与我们系统要求最小值之间取最大值，这样的话，它就被加在了一个最大的值之间，与最小的值之间啊，加在了它的中间了OK，这是它的位置。
那么，关于高度啊，仍然是如此。
呃，加载这样啊，这样啊，这样啊，这样加一下，加起来就加出来了，加出来之后呢，我们最终可以返回actual。
accident就可以返回了OK，那么我们对于啊，这三个函数这三个工具函数啊，我们就都做完了，那么下面我们就可以对它们进行拼装了。

