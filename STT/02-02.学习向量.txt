02-02.Vulkan-学习向量

好，各位同学，大家好，那么从这节课开始呢，就带领大家先回顾一下线性代数的知识，那么在计算机图形学里面呢？
最重要的一门数学知识，那就是线性代数了啊，我们有的同学呢，可能学过。
有的同学呢，可能还对它比较陌生，那么在这节课里面呢，我们统一进行一下普及及回顾好，那么首先我们看一下向量啊，到底什么是向量？
从a点指向b点的一个有方向，有长度的量，就称为向量。
那么，我们一般研究呢，是聚焦在三维向量里面。
啊，它就是表达空间当中的一个方向。
那么，它的写作方式呢？
是这样的一个小a带一个箭头，或者是什么呢？
如果是一个由a点指向b点的向量，那么就写作AB由a点上面的箭头，对吧？
指向b点。
它的计算方式是怎样的呢？
我们知道a作为一个点，它有xyz坐标b作为一个点，有xyz坐标，那么因为是由a指向b的，所以呢，我们就由b的坐标减去a的坐标，而得到这个三维向量。
那么，向量的程序表达一般，我们都会在啊程序里面写一个vector类。
然后呢，它拥有xyz三个变量啊，那么分别表达它的三个坐标值，作为一个向量来讲，它的重要参数是什么呢？
是长度通常啊，在游戏当中啊，我们会用向量表达速度啊，力啊等等。
所以说呢，它是拥有长度的，长度就代表它的大小，它的三个分量呢，就代表了它在三个方向上的力，或者是速度等等。
另外呢，向量一定是有方向的啊，它的方向属性呢，比如用来表示法线的方向啊，光路它传播的方向啊，以及你看向的方向啊，视角对吧？
三向量并不关心开始的位置，因为表示的是拥有方向的量啊，就是说呢，它只是表示一个方向，你把这个方向啊，它放在任何一个点，作为起始点，其实它都表达的是这个方向跟这个长度，对吧？
所以说他只关心方向长度。
好，我们看一下单位向量的概念啊，在说这个之前呢，首先看一下向量的长度，长度less等于它的三个坐标平方相加，再开根号对吧？
非常简单。
它写错小a箭头，然后这个竖杠中间的啊，两边各自有两个竖杠，就这样写它的长度，那么向量单位长度啊，它的单位向量是指啊长度为一的向量。
啊，长度为一的向量，我们称之为单位向量，那么将啊，普通的向量方向不变，长度把它变为一，这个过程被称为归一化。
我们通常求得一个向量，之后呢，可能接下来所做的所有的相关计算呢，都与它的长度没关系了啊，所以说我们那个时候就想要把它变成个单位。
向量只表示方向啊，长度永远为一。
那么，单位向量的表达式小a上面加一个一个小帽子啊，这就是单位向量，它的求法是这样的，用a向量，它的每一个分量xyz分别除以a向量的长度。
也就是a向量的模啊，这样一除呢，我们就得到了这个单位向量啊，这个过程就叫归一化，通常用于表示纯粹的方向计算啊，它好在哪里呢？
其实我们后面都能看到啊OK。
接下来我们看一看啊，向量是可以相加的啊，在我们探讨任何一个数学概念的时候，通常有两种解释，第一种是几何解释，第二种是代数解释。
所谓几何解释，就是哎，你在纸上给我画一下，到底说它在几何上展现出来的样子是什么？
对吧？
那代数呢？
就是你把啊公式给我列出来，我就能看看这个公式上长什么样子啊，一个是用图，一个是用数来进行解释，大家可以这么通俗的理解。
那么，第一种法则我们称为平行四边形法则啊，如果我们要计算a+b，那么我们将a向量和b向量把它俩诶起点移到同一个点上。
然后呢，我们再把b啊平移复制一个啊，平移到这个地方来，让第二个b向量呢，从a的末尾开始计时。
然后把a向量也复制一个，从第一个b向量的末尾起始，哎，这样就构成了一个什么平行四边形对吧？
那么从二者的起点一直画向二者第二个，第二组向量的终点也就是它的对角线，这根向量就是a+b的意思。
那么我们再看一下通俗三角形法则的解释啊，首先呢，a随便找一个起点，然后呢，b向量是在a向量的中点作为起点。
随后，我们将a向量的起点，连向b向量的终点就是a+b的表示方法。
啊，那么这个就是啊，它的一个几何解释啊，这个非常简单，对吧？
很通俗啊，然后呢？
代数解释其实就是a和b向量啊，它两个向量的xyz坐标分别相加即可，就是这样。
那么，向量的乘法呢？
它分为两种东西，一个是点乘，一个是差乘啊，那么向量的点乘，我们先看一看啊，它到底怎么去做一下这个几何方面的解释，或者说有几何图形，我们对照着看一看。
a向量中间一个小点b向量，这个就是对于点乘的表达方法啊，在程序里面我们写作dot啊dot dot，然后呢，它等于a向量的模就是长度乘以b向量的模就是长度。
乘以cos theta这个theta角呢，就是它俩之间的这个夹角啊，通常小于180度，然后cos theta是不是也可以算出来了呀诶？
看啊，我们先定义了这样一个式子。
然后我们接下来看一下这个啊代数解释，我们这么看，先看它，再看它，看它的话呢，就是向量乘法的代数解释，直接把它俩对应坐标相乘再相加，所以向量的乘法其实最后得到的是一个数字，对吧？
那么，我们再看中间这一行啊，也就是说呢，我们这么定义了向量的点乘啊，我们就可以直接求取两个向量之间夹角了，对吧？
那么夹角的考算值呢？
就等于诶先通过它俩相点乘算出一个数。
怎么算啊啊？
两者的坐标相乘再相加来得到上面这个数，然后再分别算a和b各自的长度诶，再除一下我们是不是就得到它俩之间的夹角cos塞塔值啊？
对吧？
所以说呢，是可以求角的。
那如果说a和b向量都是单位向量的话，我们看这个公式，如果a和b都是单位向量，是不是下面两个都是一啊诶？
那是不是可以直接写成cos塞塔等于a的单位向量和点乘b的单位向量？
所以大家看这儿就简化了很多的运算啊okay，那么向量的点乘呢是有性质的啊，比如a向量乘以b向量等于b向量点乘a向量啊，这是一个交换律。
然后呢，也可以分配进去啊a向量顶成b+c向量是可以等于a向量点成b，再加上a向量点成c向量，这样子可以把它分配进去啊，然后还有可以结合啊，小k是一个数字。
k倍的a向量乘以点乘b向量等于a向量点乘k倍的b向量等于k×a向量点成b向量的结果OK，这就是它向量点乘的性质。
那么我们再看一下向量点乘啊，通常在迪卡尔坐标系里面怎么写啊？
我们通常看书啊，或者看呃图形学的书也好看，数学也好，我们经常会遇到这样的公式，这个我们需要看一下啊a向量点成b向量在代数里面的写法是这样的。
首先呢，是把向量以列向量的形形式进行表达啊，列向量的形式就是如果说你把xyz这样竖着写下来，表达一个向量啊，就是列向量，那如果你横着写啊x对吧yz啊，这样横着写就是。
好，那就是那个呃，正常的向量呃，就不是列向量OK，我们现在把它变成列向量，那么列向量两个写出来相乘变成啊，就等于这个坐标两个相乘并且相加，这是一个通俗的表达方式啊，我们一般情况下记在计算机的图形学里面啊，就是用这种。
列向量的形式表达向量OK。
那么，接下来我们看啊呃，向量的这个点乘它到底有什么作用呢啊？
我们看一看，如果说我们要计算b向量，在a向量上的投影向量，什么叫这个定义呢？
这什么东西呢？
首先，我们有一个a向量，有一个b向量，我们把b向量啊，把它投影在也就是画一个垂线投影，在a向量这个方向上啊a向量这根线上啊，这根方向上那么我们可以投影出来一个b垂啊，这个向量。
那么，我们怎么才能求这个b垂呢？
首先我们知道啊，b垂的方向一定跟a向量的方向是有一个k倍的关系的，对吧？
那b可能b向量可能也会冲这儿，对吧？
指向这个方向，那是不是b向量？
如果指向这个方向的话，它垂下来所得到的这个向量诶，它是不是冲这的冲这个方向啊？
就从左边的对吧？
那这样的话，这个k也就是负数了啊，只不过说在这种情况下。
垂进来之后呢？
b垂跟a是同一个方向，所以说呢，我们可以把它定义为啊b垂等于k×a的单位向量啊，只有方向啊，那k等于多少呢？
对不对？
那可能有正值，也可能是有负值是吧？
也有可能呃，可大可小。
那么ka是不是就一定等于b的模啊？
对吧？
b垂的模啊怎么算的啊？
两边各自取它的模啊，各自取它的长度，那么由于a是。
单位向量对吧a小帽是单位向量，所以说呢，就只剩下了k啊，所以k=b的长度啊b垂的长度，当然这个k=b垂的长度的话呢，这其实写的也不精确啊，因为可正可负，对吧，所以说在这边我们直接写成什么呢，写成b的长度乘以cos theta。
因为b垂的长度呢，就等于b的长度，对吧？
这根成一个cos theta角啊，这很简单，然后cos theta是自带正负值的OK？
第二个作用的话呢，是可以判断是否同向啊，我们根据向量点乘的这么一个规则啊，我们就能够这样得出这么一个结论，首先画一个圆啊，我们发现a向量和b向量是不是在一个圆的同一侧呀？
对吧？
中间画一条线。
都是forward，那么a和b向量相乘，一定等于一个正值，对吧？
因为它俩之间的夹角永远是小于90度的，然后呢？
如果说a向量跟z向量相乘引成的话呢？
一定会得到一个负值哎，所以说由此可以判定啊。
b向量是在和a同侧的，然后呢？
c向量和a是在不同侧的啊，是负值就是不同侧，所以说呢，这个也是挺有用的一个原则啊。
好，那么接下来啊，我们看一看向量的差，乘向量的差，乘来讲的话啊，我们先看一看二维的几何意义啊，因为三维不好画，二维的几何意义非常简单啊a向量。
啊叉乘b向量啊，其实就是最后等于的一个数字啊，是这个是a乘叉呃点乘a向量的，这个模乘以b向量的模乘以一个s其ta其实就是。
这么一个平行四边形的面积对吧啊？
这个非常简单，我们看一看就行，那么接下来我们一个重点的东西啊，就是差乘的含义，然后这边这边是写错了啊，不应该是a向量加b向量，我们应该是a向量啊。
应该是叉乘啊x吧，叉乘啊，就这么表示一下啊。
好，那么a向量叉乘b向量啊，在三维的几何意义？
这个非常重要啊，也建议大家仔细的竖下楼梯，我们看啊。
a向量有自己的方向，对吧？
b向量有自己的方向啊，我们得到的这个差乘之后的结果呀，其实是有一个c向量的，就这个那我们先不要管这个c向量，最后啊，它到底是多长，我们先确定一下c向量的方向。
怎么确定呢？
哎，是这样的，大家把右手伸出来，从a向量的方向啊，握向b向量的方向，就好像我们图上所示啊，从a向量的方向看，这样握向b向量的方向。
右手那这样你的拇指所指向的方向就是最终结果向量的方向啊，这个很重要，这用来构建坐标系啊，或者是用来构建一些法线啊，都很常非常重要啊。
我们再看一下向量差乘的代数，表示啊，代数表示就很简单了呃，上面上方的向量差乘下方的向量啊，是可以写作一个新的向量的，我们看到也是一个三维向量啊。
只不过呢，这个新向量，它的x坐标是这么表示的，这是它的y坐标的表示，这是它z坐标的表示，具体来讲呢，就是一个打叉叉的一个过程啊，很有意思，首先呢，把第一个向量的y取出来。
然后呢，打一个斜线啊，把它俩乘起来，再把第一个向量的z取出来，再打个斜线是向左边打啊，然后到了与y相乘，然后呢，用第一个结果减去第二个结果啊，就是这条。
然后呢？
再用z啊，再连连到人家的x上，然后再拿它的x连到人家的z上，把这两个相乘的结果再相减啊，就得到了第二行。
第二个数啊，最后呢，我们用xx把第一个的x与人家的啊y相连，把第一个的y与第二个的x相连相乘啊，再把这个结果相减，就是这个。
okay，所以说我们也得到了差乘的代数表示啊，我们刚才知道啊。
重点在这儿啊，我们其实可以通过这个公式，直接把这个差乘的结果向量给算出来的，但这个结果向量有很重要的几何意义，就是这个我们可以看到啊呃，我们如果通过这个方式判断方向的话，是不是这个c向量一定与AB垂直啊？
对吧，它是一定与AB垂直的，所以说它可以被用来构建迪卡尔坐标系，对吧？
迪卡尔坐标系就是三个轴，两两垂直，这么一套坐标系，那么如果说呢，我现在拿到了a向量和一个b向量，它们是一个三维的向量。
然后呢，它们两个之间，我们假设互相垂直，现在呀，我想构建一个坐标系啊，我让a就是x轴，让y就是呃，让b就是y轴，然后我想构建一个z轴出来啊，从这个作为原点，构建一个坐标系，怎么做呢？
是不是直接用a向量叉乘b向量得到的那个向量就是我们要求的诶，这个z向量对吧？
就是这个z向量，所以我们看啊，由x我们知道了呃，一个我们想知道了x知道了y啊，这两个向量的坐标，我们就能求取第三个向量的坐标了。
从而让他们构建一个坐标系出来啊，这是一个很有用的方式啊，在我们构建这个摄像机坐标系的时候啊，就非常重要OK，另外的话我们可以判断啊点是否在三角形之内。
啊点师傅在三角形之内怎么判断呢？
我们看啊AB向量点乘AP向量啊叉乘AP向量，我们得到的向量是什么呀？
什么样的方向呢？
我们可以伸出右手来啊，从AB方向我们现在手指头冲这啊，冲着AB向量的方向啊，我们右手的。
啊，四个手指头是冲向AB方向的啊，然后握向AP向量啊，握向这个方向就是这样握啊，握过来我们会发现啊，大拇指是冲向屏幕外面的，对吧？
好，我们再用AP向量，再插成AC向量，同样的方式啊，首先四个手指头冲向AP对吧，然后这样握向AC，我们会发现手指头冲向哪啊？
屏幕外面诶，也就是说AB插成AP和AP插成AC得到的向量呢？
它的方向是一样的。
诶，我们再看一下这个q点啊q点，现在在三角形外面了，那么AB插成aq的话呢，是不是仍然从AB卧向aq它？
它是大拇指冲哪啊？
冲屏幕外面对吧？
但是AC插成aq的时候就不一样啊aq插成AC的时候就不一样了，对吧啊？
大家在这不要乱啊，我们判断方式是AB乘插乘aq应该与aq插成AC是同一个方向。
我们现在已经知道了呢AB插成aq冲哪啊？
冲屏幕外面对吧？
那么aq插成AC冲哪呢？
大家仍然把手拿出来啊，首先四个手指头冲向aq。
然后呢，卧向AC我们会发现大拇指冲向屏幕里面了啊，所以说这两个结果不相等了，它们两个的方向是不相等的。
所以呢，q点在三角形的外面OK好，那么这节课呢，我们就介绍了啊，一些向量方面必要的知识。

