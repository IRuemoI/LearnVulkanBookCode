02-05.Vulkan-三维坐标变换

好，各位同学大家好，我们这节课呢，就将坐标变换的理论应用到三维的领域。
我们通过上节课已经知道了，在一个二维的坐标系下如何呢？
通过呃二×2矩阵对坐标进行一个缩放，和和旋转的这么一个操作。
并且呢，我们也理解了啊，如何呢？
通过我们的其次坐标系啊，将所有的变换，包括平移在内，给整合到一个矩阵里面。
在三维里面呢，其实也是同样的道理，这是我们一个三维当中的点的坐标，那么这个顶点坐标呢，它会被扩展成为一个其次坐标，加了个欧米伽。
那么这边如果它是一个点，那么欧米伽就等于一，如果它是一个向量的话，欧米伽就等于零。
然后呢，乘以这样一个变换矩阵，我们呢，把三维情况下啊，你看二维的话，基础矩阵是二×2，那么它的其次矩阵呢，就是三×3。
在三维下面呢，它的正常的矩阵啊，就是中间这些部分啊，从a到I那么为了兼容啊，这个平移的情况，所以呢，就把它扩展成为了一个四×4的矩阵。
啊，是这个道理，然后呢，最后一列仍然是填入需要平移的量啊，中间这些呢，可能是旋转，也可能是缩放，也可能是二者的混合物。
最终呢，能够产生这么一个新的坐标okay。
由于那个平移啊，跟缩放的矩阵啊，二维与三维的差距并不很大，所以我们这里直接给出像这边啊，就是三维情况下的缩放矩阵xyz各自的缩放因子被排列在主对角线上。
那这边的话呢，就是三维下的纯粹的平移矩阵啊xyz分别的平移量会填写在最后一列可正可负。
那么接下来呢？
我们要去讲三维情况下的旋转，如果要理解三维情况下的旋转呢？
我们就要想象一下啊，在三维下是不是一定要绕着某个轴去旋转多少角度诶？
这个事才成立对吧？
所以说呢，我们就要在三维下面先定义坐标系啊，到底是xyz冲向何方？
所以说呢，在这里就给大家介绍右手坐标系。
什么是右手坐标系呢？
我们把自己的右手伸出来，就像这幅图片里面一样啊，形成这样的一个姿势。
那么，我们的拇指指向的就是x正方向，食指上方为y正方向，而我们的中指前方啊，它的为它的z轴正方向。
这样构成的一个坐标系称为右手坐标系，而我们的在图形学当中呢啊，我们的摄像机啊呃会默认冲向哪呢？
冲向z轴的负方向啊，就是z轴负方向这边啊，冲向这边。
那么，为什么说它那边呢？
那是因为啊，这是在我们图形学当中的一个默认的规则啊，因为OpenGL里面就是这么回事，所以一直被沿用，当然在很多引擎里面啊，像UE啊unity啊，它都有自己的这样一个啊坐标体系啊。
啊，对我们暂且不谈好，那么这样的话，我们就介绍完了右手坐标系。
在右手坐标系介绍完毕之后呢，我们要知道啊，旋转啊，肯定要绕这三个轴xyz去旋转的，一般情况下在做游戏的时候啊，我们都会将旋转这个操作放在它平移之前啊，为什么呢？
就比如说啊，我作为一个小人，我自己先绕着y轴转一下。
然后我再被便宜到什么地方去啊，这样的话呢，能保证绕着我自己的轴心运转。
那么，我们接下来就要开始看啊，绕着三个轴去旋转，有一种特殊的方式，就是欧拉角。
欧拉角呢，将这三种旋转方式分别取了名字啊x方向，就是绕x轴旋转。
我们称为pitch。
p起来就是一种点头的操作啊，像你点头一样的，这样一个旋转方式，那么呃，我们的腰是什么呢？
就是绕着y轴旋转，就是你左右看。
row呢是滚动啊，滚动什么是滚动呢？
你就理解一下啊，你趴在床上，然后头冲着前面看，然后呢滚呃，在床上滚来滚去啊，就是row。
好，那么我们具象化的看一下欧拉角，首先看一下pitch啊，那这个样子就是pitch啊，大家看这个蓝色的轴就是z轴，红色的轴就是x轴，绿色就是y轴啊，你看它现在呢？
绕着x轴在做旋转就是一种pitch的操作啊，上下点头。
那么，在讲欧拉角的时候啊，在这里我们借助这张图给大家讲一讲。
欧拉角的硬件构造啊，现在我们已经脱离图形学的这个说法了啊，我们现在进入啊，这个陀螺仪的这个领域啊，在航海的时候啊，最早就是用陀螺仪来定向的是否偏航啊等等。
那么在船上呢，就会有图里面啊，这样一种硬件，这种硬件的话是这样的，它这个你别看它这个最外面这个绿色的圈在转动啊，其实外面的这个圈啊，它底下是一个底座啊，粘到船上，大家可以这么去想象啊诶，大家看呢，我粘到船上，为什么这个绿绿色的圈还能这样转呢是吧？
那是因为啊，你船随着这个航海有上下颠簸，一会低下头去，一会被大浪又抬起头来啊，所以说其实最外面这个层啊，它就是看这个pitch的啊上下。
好，那么我们再进一步的看，探讨一下这个硬件啊，我们看呃，现在的这个p10操作怎么被陀螺仪给感知到的呢？
其实是通过这个红色的小旋钮。
哎，这个红色的旋钮就能感知到，你看整个动起来的时候也就只有在这个位置有摩擦感是吧啊？
是这样子那么。
其他的感知按钮在哪呢？
唉，这还有一个蓝色的感知按钮是吧？
我们想象啊，这整个陀螺仪的圈圈啊，左右转动，这样转动的时候啊。
绕着y轴转动啊，这不是y轴嘛，这根就是y轴，绕着y轴转动的时候是不是是不是就会摩擦这样一个蓝色的部位对吧？
然后呢？
还能怎么转啊？
还能绕着这个z轴就蓝色这个轴去旋转，那摩擦的是谁啊？
摩擦的就是这个绿色的部位啊？
所以说呢，其实通过三个方向的这样一个RP时等等，这样一个旋转啊，就能够摩擦到这几个这几个点位啊，摩擦到这个点位就能感知到说哦，这个船看来是上下颠簸当中啊，还是偏航了左右偏航啊，对吧，或者说它它有一个左右倾斜啊，肉滚动的倾斜啊，对吧？
是这样啊，所以这就是拖拉机的一个硬件构造啊，我们讲这样一个东西啊，其实结合图形学怎么结合，我们还得后面看啊，好，我们接下来看一下欧拉讲的er啊，那个ur的话呢，你看它是绕着谁来旋转啊啊，它是绕着。
y轴来旋转，绕着y轴旋转，那y轴旋转的话呢？
你看到摩擦的就是这个蓝色的部位对吧？
唉，就能感知到了，你在左右摇头啊，左右摇头，那这个呢？
就是摩擦的是谁啊？
摩擦的是绿色的部位啊，摩擦了绿色的部位，所以说这就是肉啊，我们可以想象一艘船在海上。
突然，左边的水平面低下来了是吧？
右边一个浪啊，把它打上去了，这个船就会左右倾斜，就这样子啊，就倾斜掉了，所以感知到了，那么在欧在这个陀螺仪当中啊，存在一种情况，称为万象死锁。
我们可以看到这样一幅图啊，这样一幅图呃，现在这种动态，我们看看到底有没有被感知到呢诶，好像是不是哪一个环节都被摩擦看绿色环节有被摩擦吗？
是没有被摩擦对吧？
然后红色环节有被摩擦吗？
红色也没有被摩擦啊，然后蓝色被摩擦了吗？
蓝色没有被摩擦唉，所以说处于这样一个形状情况下的这个欧拉角的这样一个托洛伊尔就处于万象思索当中了。
那么我们刚才刚刚刚才啊都讲了很多关于这个陀螺仪硬件的问题啊，但是呢，我们却没办法把它映射到图形学里面，对吧？
那么现阶段就这堂课来讲啊呃，还没办法给大家讲解啊，到底欧拉角呢？
是怎么应用在这个图形学当中的？
啊，因为这个跟引擎的设计有关，也是跟啊，有一种叫做look at矩阵是有关系的啊，也是跟什么有关系呢，也是跟说呃，在每一个方向上的旋转，谁嵌套了谁，这件事也是有关系的。
所以说呢，在这节课我们主要的目标是什么？
理解欧拉角就好了啊，知道有这么个东西，也知道有这么一种死锁的现象在后面，我们再推导一些low开的矩阵，等等的时候啊，我们有机会再回头看这样一件事情到底怎么形成的？
好，那么最终我们可以给出啊，这个旋转矩阵啊，我们现在刚才欧拉角的事啊，跟这件事我们可以暂时认为没关系啊，没关系，欧拉角是欧拉角，只是给大家普及一下，这样一个知识体系。
那么在这边呢，我们给出的就是干干净净的啊，旋转矩阵，如果你要绕着x轴旋转，阿尔法角度，那么你得到的是这样一个矩阵，绕着y轴旋转，阿尔法角度得到这样一个矩阵，绕着z轴旋转，阿尔法角度得到这样一个矩阵。
好，那么讲到这里啊，就关于矩阵的操作啊，以及坐标变换的事呢，咱们就差不多了。

