# é¡¹ç›®è¯´æ˜

## é¡¹ç›®è¯´æ˜

é€šè¿‡å­¦ä¹ æœ¬é¡¹ç›®ä¸­åŒ…å«çš„Vulkanç›¸å…³å‚è€ƒä¹¦ç¤ºä¾‹ä»£ç å’Œç°ä»£C++æ•™ç¨‹ï¼Œå¼€å‘è€…å¯ä»¥ä»¥ç›¸å¯¹å¹³ç¼“çš„å­¦ä¹ æ›²çº¿å®ŒæˆVulkanå…¥é—¨åˆ°è¿›é˜¶é˜¶æ®µçš„å­¦ä¹ ã€‚

**å‘è¡Œç‰ˆä¸­çš„epubæ–‡ä»¶ä»…ä¾›å­¦ä¹ ç”¨é€”ï¼**

### ğŸ“‹ å¿«é€Ÿå¼€å§‹

**ğŸ”´ é‡è¦ï¼šä½¿ç”¨å‰è¯·å…ˆä¸‹è½½é¡¹ç›®ä¾èµ–**

ç”±äºé¡¹ç›®åŒ…å«å¤§é‡æ¨¡å‹å’Œçº¹ç†æ–‡ä»¶ï¼Œè¯·å…ˆä»ä¸‹æ–¹çš„ç½‘ç›˜é“¾æ¥ä¸‹è½½"é¡¹ç›®ä¾èµ–ä»¥åŠèµ„äº§.zip"å¹¶è§£å‹åˆ°é¡¹ç›®æ ¹ç›®å½•ã€‚

å¦‚æœæ‚¨æ˜¯Vulkanåˆå­¦è€…ï¼Œå»ºè®®ç›´æ¥ä» `ep01` å¼€å§‹å­¦ä¹ ç°ä»£Vulkanå¼€å‘ã€‚

## æœ¬é¡¹ç›®çš„å†…å®¹åŒ…å«

### ğŸŸ¢ æ¨èå­¦ä¹ è·¯å¾„ï¼ˆç°ä»£C++æ¡†æ¶ï¼‰
- **ç°ä»£Vulkanæ•™ç¨‹ç³»åˆ—** - é¡¹ç›®å‰ç¼€ä¸º `ep*` (ep01-ep13)
- **ç°ä»£æ¶æ„é‡æ„ç¤ºä¾‹** - `Chapter13-04-refactored`
- **ç‰¹ç‚¹**: ä½¿ç”¨ç°ä»£C++ç‰¹æ€§ï¼ŒRAIIèµ„æºç®¡ç†ï¼Œæ™ºèƒ½æŒ‡é’ˆï¼Œæ¨¡å—åŒ–è®¾è®¡

### ğŸŸ¡ ä¼ ç»Ÿåº”ç”¨æ¶æ„ï¼ˆå‚è€ƒå­¦ä¹ ï¼‰
- **ã€ŠVulkanå¼€å‘å®æˆ˜è¯¦è§£ã€‹(å´äºšå³°)**çš„éšä¹¦ä»£ç ï¼›é¡¹ç›®å‰ç¼€ä¸º `Chapter*`
- **ç‰¹ç‚¹**: å®Œæ•´çš„åº”ç”¨ç¨‹åºï¼Œå®ç”¨å¯¼å‘ï¼Œé€‚åˆäº†è§£å®é™…é¡¹ç›®å¼€å‘

## å¼€å‘ç¯å¢ƒä»¥åŠé¡¹ç›®ä¾èµ–

* ç‹¬ç«‹æ˜¾å¡(å¯é€‰é¡¹ï¼Œæ”¯æŒçš„å±‚å’Œæ‰©å±•æ›´å¤š)
* VS/CLion/VSCode
* VulkanSDK:1.3.290.0(å®‰è£…æ—¶å‹¾é€‰glm)
* glfw:3.4
* sdl:3.1.6
* sdl_mixer:2.8.0
* glm:å¤åˆ¶è‡ªvulkanSDKä¸­çš„includeæ–‡ä»¶å¤¹
* glslang:åœ¨Github[ä»“åº“](https://github.com/KhronosGroup/glslang)é€‰æ‹©ä¸vulkanSDKç‰ˆæœ¬åŒ¹é…çš„1.3.290.0ç‰ˆæœ¬çš„åˆ†æ”¯å¹¶å…‹éš†åˆ°æœ¬é¡¹ç›®çš„ä¾èµ–æ–‡ä»¶å¤¹å†…(åœ¨CMakeLists.txtä¸­å·²ç»é…ç½®å®Œæ¯•)

### ğŸ“¦ é¡¹ç›®ä¾èµ–ä»¥åŠèµ„äº§ä¸‹è½½

ç”±äºé¡¹ç›®åŒ…å«å¤§é‡çš„æ¨¡å‹æ–‡ä»¶ã€çº¹ç†å›¾ç‰‡å’Œå…¶ä»–ä¾èµ–èµ„æºï¼Œæ–‡ä»¶ä½“ç§¯è¿‡å¤§æ— æ³•æäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚

**ä¸‹è½½é“¾æ¥ï¼š**

- **ç™¾åº¦ç½‘ç›˜**: [é¡¹ç›®ä¾èµ–ä»¥åŠèµ„äº§.zip](https://pan.baidu.com/s/18fhhZLzBAHb3xwj7DAnQCA?pwd=1111) æå–ç : 1111

**ä¸‹è½½åè¯·è§£å‹åˆ°é¡¹ç›®æ ¹ç›®å½•**ï¼Œç¡®ä¿ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
vulkan-book-code/
â”œâ”€â”€ models/              # 3Dæ¨¡å‹æ–‡ä»¶
â”œâ”€â”€ textures/            # çº¹ç†å›¾ç‰‡æ–‡ä»¶
â”œâ”€â”€ dependencies/
â”‚   â”œâ”€â”€ glfw/            # çª—å£å’Œè¾“å…¥ç®¡ç† (3.4)
â”‚   â”œâ”€â”€ sdl/             # çª—å£å’Œè¾“å…¥ç®¡ç† (3.1.6)
â”‚   â”œâ”€â”€ sdl_mixer/       # éŸ³é¢‘æ··éŸ³åº“ (2.8.0)
â”‚   â”œâ”€â”€ glm/             # æ•°å­¦è¿ç®—åº“
â”‚   â”œâ”€â”€ glslang/         # ç€è‰²å™¨ç¼–è¯‘å™¨ (1.3.290)
â”‚   â””â”€â”€ gli/             # å›¾åƒå¤„ç†åº“
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ imgui/           # å›¾å½¢ç•Œé¢åº“
â”‚   â”œâ”€â”€ nlohmann/        # JSONè§£æåº“
â”‚   â”œâ”€â”€ STD/
â”‚   â”‚   â””â”€â”€ stb_image.h  # å›¾åƒåŠ è½½
â”‚   â””â”€â”€ TOL/
â”‚       â””â”€â”€ tiny_obj_loader.h  # æ¨¡å‹åŠ è½½
â””â”€â”€ ...
```

## ğŸ“š å­¦ä¹ è·¯å¾„å»ºè®®

### ğŸš€ æ ¹æ®ç»éªŒé€‰æ‹©å­¦ä¹ è·¯å¾„

#### ğŸ”¸ å®Œå…¨åˆå­¦è€…è·¯å¾„
1. **ç°ä»£C++æ¡†æ¶å­¦ä¹ ** (`ep*` ç³»åˆ—)
   - ep01-ep03: ç¯å¢ƒæ­å»ºå’Œè®¾å¤‡åˆå§‹åŒ–
   - ep04-ep07: äº¤æ¢é“¾ã€ç®¡çº¿ã€å‘½ä»¤åŸºç¡€
   - ep08-ep09: é¡¶ç‚¹å’ŒUniformæ•°æ®
   - ep10-ep13: çº¹ç†ã€æ·±åº¦ã€æŠ—é”¯é½¿ã€æ¨¡å‹ç»˜åˆ¶

#### ğŸ”¸ æœ‰ç»éªŒå¼€å‘è€…è·¯å¾„
1. **ç›´æ¥ç°ä»£C++æ¡†æ¶** (`ep*` ç³»åˆ—)
   - é€‚åˆï¼šæœ‰VulkanåŸºç¡€å’Œç°ä»£C++ç»éªŒçš„å¼€å‘è€…
   - å­¦ä¹ ç°ä»£Vulkanå¼€å‘æœ€ä½³å®è·µ

2. **å‚è€ƒå®é™…åº”ç”¨** (`Chapter*` ç³»åˆ—)
   - äº†è§£å®Œæ•´çš„æ¸²æŸ“åº”ç”¨æ¶æ„
   - å­¦ä¹ å®é™…é¡¹ç›®ä¸­çš„åŠŸèƒ½æ¨¡å—åˆ’åˆ†
   - å‚è€ƒå¤æ‚åŠŸèƒ½çš„å®ç°æ–¹å¼

#### AIæ—¶ä»£çš„å­¦ä¹ åŠ©æ¨å™¨

* å®‰è£…opencodeæˆ–è€…claude code
* è´­ä¹°å›½å†…æˆ–è€…å›½å¤–å¹³å°çš„ç¼–ç å¥—é¤è·å–api keyå¹¶é…ç½®
* è®©AIè‡ªè¡Œé…ç½®é…ç½®[epub-mcp](https://github.com/onebirdrocks/ebook-mcp)ï¼Œæ–¹ä¾¿è¯»å–ä¹¦ä¸­å¯¹åº”çš„å†…å®¹å¸®åŠ©ç†è§£
* åˆ©ç”¨AIè§£é‡Šå¤æ‚çš„Vulkan APIæ¦‚å¿µå’Œæ¸²æŸ“ç®¡çº¿æµç¨‹
* ä½¿ç”¨AIè¾…åŠ©è°ƒè¯•Vulkané”™è¯¯ï¼Œç‰¹åˆ«æ˜¯VK_ERROR_*é”™è¯¯ç çš„å¿«é€Ÿå®šä½å’Œè§£å†³æ–¹æ¡ˆ
* è®©AIå¸®åŠ©å¯¹æ¯”ä¼ ç»Ÿæ¶æ„ä¸ç°ä»£C++æ¶æ„çš„ä¼˜ç¼ºç‚¹ï¼ŒåŠ é€Ÿç†è§£è®¾è®¡æ¨¡å¼
* AIè¾…åŠ©è§£å†³å¹³å°ç‰¹å®šé—®é¢˜ï¼ˆå¦‚macOSçš„MoltenVKé€‚é…ã€ä¸åŒGPUçš„é©±åŠ¨å·®å¼‚ï¼‰
* åˆ©ç”¨AIè¿›è¡Œä»£ç é‡æ„å»ºè®®ï¼Œä»ä¼ ç»ŸC++å‘ç°ä»£C++ï¼ˆæ™ºèƒ½æŒ‡é’ˆã€RAIIï¼‰çš„æ¸è¿›å¼æ”¹é€ 
* ä½¿ç”¨AIç”Ÿæˆè·¨ç« èŠ‚çš„çŸ¥è¯†ç‚¹è¿æ¥ï¼Œæ„å»ºå®Œæ•´çš„VulkançŸ¥è¯†ä½“ç³»
* AIé©±åŠ¨çš„å®è·µé¡¹ç›®å»ºè®®ï¼ŒåŸºäºæ‰€å­¦å†…å®¹åˆ›ä½œå°å‹çš„æ¸²æŸ“æ¼”ç¤º

### âš ï¸ é‡è¦è¯´æ˜

#### ã€ŠVulkanå¼€å‘å®æˆ˜è¯¦è§£ã€‹éƒ¨åˆ† - **å‚è€ƒå­¦ä¹ **
- **ä»£ç ä½ç½®**: æœ¬é¡¹ç›®ä¸­æ‰€æœ‰ä»¥ `Chapter` ä¸ºå‰ç¼€çš„æ–‡ä»¶å¤¹å†…
- **å†…å®¹**: åŒ…å«åŸä¹¦å…¨19ç« çš„PCå®ä¾‹ä»£ç ï¼ˆç¬¬19ç« macè¿è¡Œç™½å±ï¼‰
- **ç‰¹ç‚¹**: ä½¿ç”¨æ–°å¼€å‘ç¯å¢ƒã€æ›¿æ¢è¿‡æ—¶APIã€ä¿®å¤BUGå¹¶å°å¹…é‡æ„åçš„å¯è¿è¡Œä»£ç 
- **è¯´æ˜**:
  - æ‰€æœ‰é¡¹ç›®å…±ç”¨æ–‡ä»¶å¤¹æ ¹ç›®å½•çš„ä¾èµ–
  - ä»“åº“å†…ä¸Šä¼ äº†å‰18ç« çš„æ¨¡å‹å’Œçº¹ç†æ–‡ä»¶
  - ä¸€ä¸ªæ¨¡å‹æˆ–çº¹ç†æ–‡ä»¶å¯èƒ½ä¼šè¢«å¤šä¸ªé¡¹ç›®ä½¿ç”¨
  - æ–‡ä»¶ä½¿ç”¨UTF8ç¼–ç 
  - ä½¿ç”¨GLFWä»£æ›¿WIN32APIå®ç°çª—å£åˆ›å»ºå’Œå¤–è®¾è¾“å…¥å¤„ç†

ç”±äºæ‰€æœ‰é¡¹ç›®ä½¿ç”¨çš„ç‰©ç†è®¾å¤‡å‡ä¸ºç‰©ç†è®¾å¤‡åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªè®¾å¤‡ï¼Œéœ€è¦ä½¿ç”¨è®¾å¤‡çš„é«˜çº§ç‰¹æ€§è¯·è°ƒæ•´é€‰æ‹©çš„ç‰©ç†è®¾å¤‡ç´¢å¼•ï¼›å½“ç„¶è¿™é‡Œä¹Ÿç»™å‡ºäº†ä½¿ç”¨Jsoné…ç½®GPUé€‰æ‹©çš„ä¸€ç§æ–¹å¼ï¼šåœ¨ä»“åº“çš„æ ¹ç›®å½•åˆ›å»º`config.json`æ–‡ä»¶

~~~json
{
  "GpuIndex": 0
}
~~~

ç„¶ååœ¨ä»£ç ä¸­ä½¿ç”¨ï¼š

~~~ c++
//å¤´æ–‡ä»¶å¯¼å…¥
#include <fstream>
#include <nlohmann/json.hpp>

//è¯»å–å¹¶è¾“å‡ºjsonæ–‡ä»¶ä¸­é”®å¯¹åº”çš„å€¼
std::ifstream f("../config.json");
json data = json::parse(f);
std::cout << data["GpuIndex"] << std::endl;
f.close();
~~~

## å¾…åŠåˆ—è¡¨ï¼š

* **é‡è¦(å½±å“ç¨‹åºæ•ˆæœ)**
    * åç»­ä¿®å¤16.02é»‘å±çš„é—®é¢˜
    * åç»­ä¿®å¤17.07æ²¡æœ‰æ°´é¢æ•ˆæœçš„é—®é¢˜
    * æ‰¾åˆ°ä¸ºä»€ä¹ˆä½¿ç”¨RenderDocå¯¹è¿›é˜¶å­¦ä¹ ä¸­çš„é¡¹ç›®è¿›è¡ŒæŠ“å¸§å¯åŠ¨æ—¶ä¼šæŠ¥é”™çš„åŸå› (åœ¨Clionä¸­å¯ä»¥è¿è¡Œï¼Œåœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­åŒå‡»æ‰“å¼€æŠ¥é”™ å¯èƒ½æ˜¯ç¼ºåº“ï¼Ÿ)
* **æ¬¡è¦(ä¸å½±å“æ•ˆæœ)**
    * åç»­ä¿®å¤12.14å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤12.15å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤13.07å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤14.01å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤14.02å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤14.07å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤15.03å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤15.05å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤15.08å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤16.01å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤16.03å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤16.04å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤16.05å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤17.01å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
    * åç»­ä¿®å¤18.01å…³é—­ç¨‹åºä¼šæŠ¥é”™`0xC0000374`çš„é—®é¢˜
* **åç»­è®¡åˆ’**
  * åœ¨å®Œæˆ18ç« çš„ç¤ºä¾‹é¡¹ç›®åç»™å‡ºä¸€ä¸ªé›†æˆ[ImGui](https://github.com/ocornut/imgui),[Json](https://github.com/nlohmann/json)çš„ä¸‰è‰²ä¸‰è§’å½¢ç¤ºä¾‹é¡¹ç›®

## ğŸ—ï¸ é¡¹ç›®æ¶æ„è®¾è®¡

### é¡¹ç›®åˆ†ç±»ä¸å®šä½

æœ¬é¡¹ç›®åŒ…å«ä¸‰ä¸ªä¸»è¦ç³»åˆ—ï¼Œåˆ†åˆ«é€‚åº”ä¸åŒçš„å­¦ä¹ éœ€æ±‚å’Œå¼€å‘é˜¶æ®µï¼š

#### ğŸŸ¢ ep_* ç³»åˆ— - ç°ä»£Vulkanæ•™ç¨‹ï¼ˆæ¨èï¼‰
- **æŠ€æœ¯æ ˆ**: ç°ä»£C++20 + RAII + æ™ºèƒ½æŒ‡é’ˆ
- **æ¶æ„ç‰¹ç‚¹**: ä¸‰å±‚æ¶æ„è®¾è®¡ï¼ˆåº”ç”¨å±‚ã€å°è£…å±‚ã€ç³»ç»Ÿå±‚ï¼‰
- **è®¾è®¡æ¨¡å¼**: å·¥å‚æ¨¡å¼ã€RAIIã€æ™ºèƒ½æŒ‡é’ˆç®¡ç†
- **é€‚åˆäººç¾¤**: æ‰€æœ‰Vulkanå­¦ä¹ è€…ï¼Œç‰¹åˆ«æ˜¯å¸Œæœ›å­¦ä¹ ç°ä»£C++å®è·µçš„å¼€å‘è€…
- **ä»£ç ä½ç½®**: `ep01` åˆ° `ep13` ç›®å½•
- **è¯¦ç»†æ¶æ„**: å‚è§ `doc/ç°ä»£cppVulkanå¼€å‘æ¶æ„è®¾è®¡æ–‡æ¡£.md`

#### ğŸŸ¡ Chapter_* ç³»åˆ— - ä¼ ç»Ÿåº”ç”¨æ¶æ„ï¼ˆè¿›é˜¶å‚è€ƒï¼‰
- **æ•™ææ¥æº**: ã€ŠVulkanå¼€å‘å®æˆ˜è¯¦è§£ã€‹(å´äºšå³°)
- **æ•™å­¦ç›®æ ‡**: å®é™…åº”ç”¨å¼€å‘ï¼ŒæŒæ¡å®Œæ•´çš„æ¸²æŸ“æµç¨‹
- **æ¶æ„ç‰¹ç‚¹**: å•ä½“åº”ç”¨æ¨¡å¼ï¼ŒåŠŸèƒ½æ¨¡å—åŒ–è®¾è®¡
- **é€‚åˆäººç¾¤**: æœ‰ä¸€å®šVulkanåŸºç¡€ï¼Œå¸Œæœ›äº†è§£å®é™…é¡¹ç›®æ¶æ„çš„å¼€å‘è€…
- **ä»£ç ä½ç½®**: ä»¥`Chapter`ä¸ºå‰ç¼€çš„æ–‡ä»¶å¤¹
- **è¯¦ç»†æ¶æ„**: å‚è§ `doc/ã€ŠVulkanå¼€å‘å®æˆ˜è¯¦è§£ã€‹æ¶æ„è¯´æ˜.md`

### æ¶æ„è®¾è®¡å¯¹æ¯”

| ç‰¹æ€§ | ğŸŸ¡ Chapter_* ç³»åˆ— (å‚è€ƒ) | ğŸŸ¢ ep_* ç³»åˆ— (æ¨è) |
|------|----------------|----------------|
| **è®¾è®¡ç†å¿µ** | åº”ç”¨å¯¼å‘ï¼ŒåŠŸèƒ½å®Œæ•´ | ç°ä»£C++ï¼Œç±»å‹å®‰å…¨ |
| **æ¶æ„æ¨¡å¼** | å•ä½“åº”ç”¨æ¨¡å¼ | ä¸‰å±‚æ¶æ„æ¨¡å¼ |
| **æ–‡ä»¶ç»„ç»‡** | src/ åŠŸèƒ½å¯¼å‘ç»“æ„ | æ¨¡å—åŒ–å°è£…è®¾è®¡ |
| **ç±»è®¾è®¡** | å•ä½“åº”ç”¨ç±» + åŠŸèƒ½æ¨¡å— | æ™ºèƒ½æŒ‡é’ˆ + å·¥å‚æ¨¡å¼ |
| **èµ„æºç®¡ç†** | æ‰‹åŠ¨èµ„æºç®¡ç† | è‡ªåŠ¨RAII + æ™ºèƒ½æŒ‡é’ˆ |
| **C++æ ‡å‡†** | C++11/14 | **C++20** |
| **å­¦ä¹ æ›²çº¿** | ä¸­ç­‰ï¼ˆå®Œæ•´åº”ç”¨ï¼‰ | å¹³ç¼“ï¼ˆç°ä»£å®è·µï¼‰ |
| **å®ç”¨æ€§** | å®é™…åº”ç”¨å‚è€ƒ | **ç°ä»£å¼€å‘æ ‡å‡†** |
| **å¯ç»´æŠ¤æ€§** | ä¸­ç­‰ï¼ˆè€¦åˆåº¦é«˜ï¼‰ | **å¾ˆé«˜ï¼ˆç°ä»£è®¾è®¡ï¼‰** |
| **ä»£ç è´¨é‡** | ä¸­ç­‰ï¼ˆå®ç”¨å¯¼å‘ï¼‰ | **å¾ˆé«˜ï¼ˆæœ€ä½³å®è·µï¼‰** |
| **æ¨èçŠ¶æ€** | âš ï¸ **å‚è€ƒå­¦ä¹ ** | âœ… **å¼ºçƒˆæ¨è** |

### ğŸ¯ ç°ä»£Vulkanæ•™ç¨‹ (ep*) è¯¦ç»†å†…å®¹

#### æ•™å­¦è·¯å¾„
```
ep01 instance      â†’ Vulkanå®ä¾‹åˆ›å»ºå’ŒéªŒè¯å±‚
ep02 device        â†’ ç‰©ç†è®¾å¤‡é€‰æ‹©å’Œé€»è¾‘è®¾å¤‡åˆ›å»º
ep03 surface       â†’ çª—å£è¡¨é¢å’Œæ¸²æŸ“ç›®æ ‡
ep04 swapChain     â†’ äº¤æ¢é“¾å’Œå¸§ç¼“å†²ç®¡ç†
ep05 pipeline      â†’ å›¾å½¢ç®¡çº¿å’Œç€è‰²å™¨
ep06 renderPass    â†’ æ¸²æŸ“è¿‡ç¨‹å’Œå­é€šé“
ep07 command       â†’ å‘½ä»¤ç¼“å†²å’Œå½•åˆ¶
ep08 vertex        â†’ é¡¶ç‚¹ç¼“å†²å’Œå±æ€§
ep09 uniform       â†’ Uniformç¼“å†²å’Œæè¿°ç¬¦
ep10 imageSampler  â†’ å›¾åƒçº¹ç†å’Œé‡‡æ ·å™¨
ep11 depth         â†’ æ·±åº¦ç¼“å†²å’Œæ·±åº¦æµ‹è¯•
ep12 antiAlias     â†’ æŠ—é”¯é½¿æŠ€æœ¯
ep13 modelDrawing  â†’ å®Œæ•´çš„3Dæ¨¡å‹æ¸²æŸ“
```

#### ç°ä»£C++ç‰¹æ€§åº”ç”¨
- **æ™ºèƒ½æŒ‡é’ˆ**: `std::shared_ptr`, `std::unique_ptr` è‡ªåŠ¨å†…å­˜ç®¡ç†
- **RAII**: èµ„æºè·å–å³åˆå§‹åŒ–ï¼Œå¼‚å¸¸å®‰å…¨
- **å·¥å‚æ¨¡å¼**: ç»Ÿä¸€çš„å¯¹è±¡åˆ›å»ºæ¥å£
- **å¼‚å¸¸å¤„ç†**: ç°ä»£é”™è¯¯å¤„ç†æœºåˆ¶
- **ç±»å‹å®‰å…¨**: å¼ºç±»å‹å°è£…å’Œç¼–è¯‘æ—¶æ£€æŸ¥

#### ğŸŒŸ ä¸ºä»€ä¹ˆæ¨èç°ä»£Vulkanæ•™ç¨‹ (ep*ç³»åˆ—)

1. **ç°ä»£C++æœ€ä½³å®è·µ**
   - ä½¿ç”¨C++20æœ€æ–°ç‰¹æ€§ï¼Œä»£ç è´¨é‡æ›´é«˜
   - RAIIè‡ªåŠ¨èµ„æºç®¡ç†ï¼Œé¿å…å†…å­˜æ³„æ¼
   - å¼‚å¸¸å®‰å…¨çš„é”™è¯¯å¤„ç†æœºåˆ¶

2. **ä¼˜ç§€çš„æ¶æ„è®¾è®¡**
   - ä¸‰å±‚æ¶æ„ï¼šåº”ç”¨å±‚ã€å°è£…å±‚ã€ç³»ç»Ÿå±‚
   - èŒè´£åˆ†ç¦»ï¼Œé«˜å†…èšä½è€¦åˆ
   - å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§æä½³

3. **å¾ªåºæ¸è¿›çš„å­¦ä¹ è·¯å¾„**
   - ä»åŸºç¡€æ¦‚å¿µåˆ°å®Œæ•´åº”ç”¨çš„æ¸è¿›å¼æ•™å­¦
   - æ¯ä¸ªç« èŠ‚ä¸“æ³¨ç‰¹å®šä¸»é¢˜ï¼Œæ˜“äºç†è§£
   - å®è·µä¸ç†è®ºç›¸ç»“åˆ

4. **ç”Ÿäº§å°±ç»ªçš„ä»£ç è´¨é‡**
   - è·¨å¹³å°æ”¯æŒï¼ˆWindowsã€macOSï¼‰
   - å®Œæ•´çš„é”™è¯¯å¤„ç†å’ŒéªŒè¯
   - æ€§èƒ½ä¼˜åŒ–çš„å®ç°æ–¹å¼

5. **æœªæ¥å‘å±•è¶‹åŠ¿**
   - ç¬¦åˆç°ä»£C++å¼€å‘æ ‡å‡†
   - ä»£ç é£æ ¼ä¸ç°ä»£å·¥ä¸šç•Œä¸€è‡´
   - ä¸ºåç»­å­¦ä¹ å’Œå·¥ä½œå¥ å®šè‰¯å¥½åŸºç¡€



### Chapter_* ç³»åˆ—æ¶æ„ç‰¹è‰²

#### åº”ç”¨æ¶æ„æ¨¡å¼
```mermaid
graph TB
    subgraph "Vulkanå¼€å‘å®æˆ˜è¯¦è§£åº”ç”¨æ¶æ„"
        B1[VulkanDemoApp<br/>å•ä½“åº”ç”¨ç±»]
        B2[ShaderQueueSuit<br/>ç€è‰²å™¨ç®¡çº¿ç®¡ç†]
        B3[DrawableObject<br/>å¯ç»˜åˆ¶å¯¹è±¡ç³»ç»Ÿ]
        B4[UtilClasses<br/>å·¥å…·ç±»é›†åˆ]
    end
    B1 --> B2
    B1 --> B3
    B1 --> B4
```

#### æ ¸å¿ƒè®¾è®¡ç‰¹ç‚¹
- **å•ä½“åº”ç”¨**: æ‰€æœ‰Vulkanèµ„æºé›†ä¸­åœ¨ä¸€ä¸ªä¸»åº”ç”¨ç±»ä¸­ç®¡ç†
- **åŠŸèƒ½æ¨¡å—åŒ–**: æŒ‰åŠŸèƒ½éœ€æ±‚åˆ’åˆ†ä¸åŒçš„æ¨¡å—ç±»ï¼ˆå…‰ç…§ã€çº¹ç†ã€åŠ¨ç”»ç­‰ï¼‰
- **å®ç”¨å¯¼å‘**: ä¼˜å…ˆè€ƒè™‘å®é™…åº”ç”¨éœ€æ±‚è€Œéæ•™å­¦æŠ½è±¡
- **å®Œæ•´åŠŸèƒ½**: æ¯ä¸ªé¡¹ç›®éƒ½æ˜¯å¯è¿è¡Œçš„å®Œæ•´åº”ç”¨ç¨‹åº

#### åŠŸèƒ½æ¼”è¿›è·¯å¾„
| ç« èŠ‚ | åº”ç”¨ä¸»é¢˜ | ä¸»è¦åŠŸèƒ½ | æŠ€æœ¯é‡ç‚¹ |
|------|----------|----------|----------|
| Chapter01-01 | å‡ ä½•ä½“ç»˜åˆ¶ | åŸºç¡€ä¸‰è§’å½¢ã€ç€è‰²å™¨ç¼–è¯‘ | ç€è‰²å™¨ä½¿ç”¨ |
| Chapter04-01~16 | 3Dæ¸²æŸ“ç³»ç»Ÿ | å®Œæ•´3Dæ¸²æŸ“ç®¡çº¿ | å˜æ¢ã€å…‰ç…§ã€çº¹ç† |
| Chapter08-01~04 | å…‰ç…§ç³»ç»Ÿ | Phongå…‰ç…§ã€ç‚¹å…‰æº | å…‰ç…§è®¡ç®— |
| Chapter13-04 | æ¨¡å‹åŠ è½½ | 3Dæ¨¡å‹åŠ è½½æ¸²æŸ“ | èµ„æºç®¡ç† |
| Chapter16-02 | æœºå™¨äººåŠ¨ç”» | éª¨éª¼åŠ¨ç”»ã€å˜æ¢ | åŠ¨ç”»ç³»ç»Ÿ |
| Chapter17-07 | æ°´é¢æ•ˆæœ | æ°´æ³¢çº¹ã€åå°„ | é«˜çº§ç‰¹æ•ˆ |

### ç°ä»£æ¶æ„é‡æ„ (Chapter13-04-refactored)

é¡¹ç›®è¿˜åŒ…å«äº†ä¸€ä¸ªé‡‡ç”¨ç°ä»£C++æ¶æ„çš„é‡æ„ç‰ˆæœ¬ï¼Œå±•ç¤ºäº†å¦‚ä½•å°†ä¼ ç»Ÿæ¶æ„æ”¹è¿›ä¸ºæ¨¡å—åŒ–ã€ç±»å‹å®‰å…¨çš„ç°ä»£è®¾è®¡ï¼š

#### æ ¸å¿ƒæ”¹è¿›
- **æ™ºèƒ½æŒ‡é’ˆç®¡ç†**: ä½¿ç”¨ `std::shared_ptr` å’Œ RAII è‡ªåŠ¨ç®¡ç†èµ„æº
- **æ¨¡å—åŒ–å°è£…**: Vulkanå¯¹è±¡è¢«å°è£…åœ¨ä¸“é—¨çš„Wrapperç±»ä¸­
- **å¼‚å¸¸å®‰å…¨**: ä½¿ç”¨ç°ä»£C++å¼‚å¸¸å¤„ç†æœºåˆ¶
- **å·¥å‚æ¨¡å¼**: ç»Ÿä¸€çš„å¯¹è±¡åˆ›å»ºæ¥å£

```cpp
// ç°ä»£C++æ™ºèƒ½æŒ‡é’ˆç®¡ç†
class Application : public std::enable_shared_from_this<Application> {
public:
    using Ptr = std::shared_ptr<Application>;
    static Ptr create() { return std::make_shared<Application>(); }

private:
    Wrapper::Device::Ptr mDevice{ nullptr };
    Wrapper::SwapChain::Ptr mSwapChain{ nullptr };
    // è‡ªåŠ¨èµ„æºç®¡ç†ï¼Œæ— éœ€æ‰‹åŠ¨ææ„
};
```

## å­¦ä¹ è·¯å¾„å»ºè®®

### åˆå­¦è€…è·¯å¾„
1. **é˜¶æ®µ1**: ep01-ep03 - ç†è§£VulkanåŸºç¡€æ¦‚å¿µ
2. **é˜¶æ®µ2**: ep04-ep07 - æŒæ¡æ¸²æŸ“æµç¨‹
3. **é˜¶æ®µ3**: ep08-ep09 - å®è·µé¡¶ç‚¹å’ŒUniformæ•°æ®
4. **é˜¶æ®µ4**: ep10-ep13 - æ·±å…¥é«˜çº§ç‰¹æ€§
5. **é˜¶æ®µ5**: Chapter08~13 - å¼€å‘å®é™…é¡¹ç›®

### è¿›é˜¶å¼€å‘è€…è·¯å¾„
1. **é˜¶æ®µ1**: é‡ç‚¹å…³æ³¨Chapter04~16çš„é«˜çº§åŠŸèƒ½
2. **é˜¶æ®µ2**: å­¦ä¹ Chapter13-04-refactoredç°ä»£æ¶æ„
3. **é˜¶æ®µ3**: å‚è€ƒé‡æ„ç‰ˆæœ¬æ”¹è¿›è‡ªå·±çš„é¡¹ç›®

## Q&A

### Q:é¡¹ç›®ä¾èµ–ä»¥åŠèµ„äº§æ–‡ä»¶å¦‚ä½•è·å–ï¼Ÿ

**A:** ç”±äºé¡¹ç›®åŒ…å«å¤§é‡çš„3Dæ¨¡å‹æ–‡ä»¶ã€é«˜æ¸…çº¹ç†å›¾ç‰‡å’Œç¬¬ä¸‰æ–¹åº“ä¾èµ–ï¼Œæ€»æ–‡ä»¶å¤§å°è¶…è¿‡æ•°GBï¼Œæ— æ³•ç›´æ¥æäº¤åˆ°Gitè¿œç¨‹ä»“åº“ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**
1. ä»æä¾›çš„ç½‘ç›˜é“¾æ¥ä¸‹è½½"é¡¹ç›®ä¾èµ–ä»¥åŠèµ„äº§.zip"
2. è§£å‹åˆ°é¡¹ç›®æ ¹ç›®å½•
3. ç¡®ä¿è§£å‹åçš„ç›®å½•ç»“æ„ä¸é¡¹ç›®æœŸæœ›çš„ä¸€è‡´

**é‡è¦æç¤ºï¼š**
- æ¨¡å‹æ–‡ä»¶ä¸»è¦ç”¨äºChapter*ç³»åˆ—çš„é¡¹ç›®
- çº¹ç†æ–‡ä»¶è¢«å¤šä¸ªé¡¹ç›®å…±äº«ä½¿ç”¨
- dependencies/ç›®å½•åŒ…å«é€šè¿‡git submoduleç®¡ç†çš„ç¬¬ä¸‰æ–¹åº“
- å¦‚æœæŸäº›é¡¹ç›®è¿è¡Œæ—¶æ‰¾ä¸åˆ°èµ„æºæ–‡ä»¶ï¼Œè¯·é¦–å…ˆæ£€æŸ¥æ˜¯å¦æ­£ç¡®ä¸‹è½½å¹¶è§£å‹äº†ä¾èµ–æ–‡ä»¶

### Q:é¡¹ç›®ä¾èµ–å¦‚ä½•é…ç½®ï¼Ÿ

æœ¬é¡¹ç›®ä½¿ç”¨VulkanSDKç‰ˆæœ¬ä¸ºï¼š1.3.290.0ã€‚å¹¶ä¸”ä»¥ä¸‹ç¬¬ä¸‰æ–¹åº“ä½œä¸ºä¾èµ–é¡¹ï¼Œå¯ä»¥é€šè¿‡git submoduleè¿›è¡Œç®¡ç†ï¼š

- **GLFW**: çª—å£å’Œè¾“å…¥ç®¡ç†åº“
  - ç‰ˆæœ¬åˆ†æ”¯: 3.4
  - ä»“åº“åœ°å€: https://github.com/glfw/glfw
  - é¡¹ç›®è·¯å¾„: dependencies/glfw

- **SDL**: çª—å£å’Œè¾“å…¥ç®¡ç†åº“
  - ç‰ˆæœ¬åˆ†æ”¯: release-3.1.6
  - ä»“åº“åœ°å€: https://github.com/libsdl-org/SDL
  - é¡¹ç›®è·¯å¾„: dependencies/sdl

- **SDL_mixer**: éŸ³é¢‘æ··éŸ³åº“
  - ç‰ˆæœ¬åˆ†æ”¯: release-2.8.0
  - ä»“åº“åœ°å€: https://github.com/libsdl-org/SDL_mixer
  - é¡¹ç›®è·¯å¾„: dependencies/sdl_mixer

- **GLI**: OpenGLå›¾åƒåº“ï¼Œç”¨äºçº¹ç†åŠ è½½
  - ç‰ˆæœ¬åˆ†æ”¯: main
  - ä»“åº“åœ°å€: https://github.com/g-truc/gli
  - é¡¹ç›®è·¯å¾„: dependencies/gli

- **GLM**: OpenGLæ•°å­¦åº“ï¼Œç”¨äºå›¾å½¢è®¡ç®—
  - ç‰ˆæœ¬åˆ†æ”¯: main
  - ä»“åº“åœ°å€: https://github.com/g-truc/glm
  - é¡¹ç›®è·¯å¾„: dependencies/glm

- **GLSLang**: GLSLç€è‰²å™¨ç¼–è¯‘å™¨
  - ç‰ˆæœ¬åˆ†æ”¯: vulkan-sdk-1.3.290
  - ä»“åº“åœ°å€: https://github.com/KhronosGroup/glslang
  - é¡¹ç›®è·¯å¾„: dependencies/glslang

- **ImGui**: å³æ—¶æ¨¡å¼GUIåº“ï¼ˆç”¨äºç”¨æˆ·ç•Œé¢ï¼‰
  - ç‰ˆæœ¬åˆ†æ”¯: master
  - ä»“åº“åœ°å€: https://github.com/ocornut/imgui
  - é¡¹ç›®è·¯å¾„: include/imgui

- **nlohmann/json**: JSONè§£æåº“ï¼ˆç”¨äºé…ç½®ç®¡ç†ï¼‰
  - ç‰ˆæœ¬åˆ†æ”¯: develop
  - ä»“åº“åœ°å€: https://github.com/nlohmann/json
  - é¡¹ç›®è·¯å¾„: include/nlohmann


### Q:å¦‚ä½•åœ¨MacOS(Apple Silicon)è¿è¡Œæ­¤é¡¹ç›®?

**MoltenVKå®‰è£…ä¸ç‰ˆæœ¬è¦æ±‚**

   - macOSä¸ŠVulkané€šè¿‡MoltenVKå®ç°ï¼Œéœ€ç¡®ä¿å®‰è£…ç‰ˆæœ¬â‰¥1.2.3ä»¥æ”¯æŒå¿…è¦çš„æ‰©å±•ã€‚
   - æ¨èä½¿ç”¨Homebrewå®‰è£…ï¼š`brew install molten-vk`

**ç«¯å£abilityæ‰©å±•é…ç½®**
   - **å®ä¾‹åˆ›å»ºé˜¶æ®µ**ï¼šéœ€æ·»åŠ `VK_KHR_portability_enumeration`æ‰©å±•å’Œ`VK_INSTANCE_CREATE_ENUMERATE_PORTABILITY_BIT_KHR`æ ‡å¿—ã€‚
   - **è®¾å¤‡åˆ›å»ºé˜¶æ®µ**ï¼šéœ€æ·»åŠ `VK_KHR_portability_subset`æ‰©å±•ã€‚
   - ç¡®ä¿`VK_KHR_get_physical_device_properties2`æ‰©å±•åœ¨å®ä¾‹çº§åˆ«å¯ç”¨ï¼ˆéè®¾å¤‡çº§åˆ«ï¼‰ã€‚

**è®¾å¤‡é€‰æ‹©ä¸é…ç½®**
   - å¯¹äºApple GPUï¼ˆMç³»åˆ—ï¼‰ï¼Œéœ€æ”¾å®½è®¾å¤‡ç±»å‹è¦æ±‚ï¼ˆä¸ä¸¥æ ¼è¦æ±‚ç‹¬ç«‹æ˜¾å¡ï¼‰ã€‚
   - æ³¨æ„Apple GPUå¯èƒ½ä¸æ”¯æŒæŸäº›ç‰¹æ€§ï¼ˆå¦‚å‡ ä½•ç€è‰²å™¨ï¼‰ï¼Œéœ€åœ¨è®¾å¤‡è¯„åˆ†å’Œé€‰æ‹©æ—¶è€ƒè™‘è¿™äº›é™åˆ¶ã€‚

**æ‰©å±•ä¾èµ–å…³ç³»**
   - åŒºåˆ†å®ä¾‹çº§æ‰©å±•å’Œè®¾å¤‡çº§æ‰©å±•ï¼Œé¿å…å°†å®ä¾‹çº§æ‰©å±•é”™è¯¯æ·»åŠ åˆ°è®¾å¤‡æ‰©å±•åˆ—è¡¨ã€‚
   - `VK_KHR_portability_subset`ä¾èµ–äº`VK_KHR_get_physical_device_properties2`ï¼Œéœ€ç¡®ä¿ä¸¤è€…éƒ½æ­£ç¡®é…ç½®ã€‚

**éªŒè¯å±‚é”™è¯¯å¤„ç†**
   - å¸¸è§é”™è¯¯å¦‚`VK_KHR_portability_subset must be enabled`æˆ–ä¾èµ–æ‰©å±•ç¼ºå¤±ï¼Œéœ€æ£€æŸ¥æ‰©å±•é…ç½®ã€‚
   - ä½¿ç”¨æ ‡å‡†å®å®šä¹‰ï¼ˆå¦‚`VK_KHR_PORTABILITY_SUBSET_EXTENSION_NAME`ï¼‰è€Œéç¡¬ç¼–ç å­—ç¬¦ä¸²ï¼Œé¿å…æ‹¼å†™é”™è¯¯ã€‚

**æ–‡ä»¶è·¯å¾„ä¸èµ„æºåŠ è½½**
   - macOSæ–‡ä»¶ç³»ç»ŸåŒºåˆ†å¤§å°å†™ï¼Œç¡®ä¿çº¹ç†ã€ç€è‰²å™¨ç­‰èµ„æºæ–‡ä»¶è·¯å¾„æ­£ç¡®ã€‚
   - æ£€æŸ¥STB_IMAGEåº“é…ç½®ï¼Œç¡®ä¿æ­£ç¡®è¯»å–å›¾åƒæ•°æ®ã€‚
**ä»£ç ç¤ºä¾‹**

å®ä¾‹éƒ¨åˆ†(instance.cpp)

~~~ cpp
Instance::Instance(bool enableValidationLayer) {
    mEnableValidationLayer = enableValidationLayer;

    if (mEnableValidationLayer && !checkValidationLayerSupport()) {
        throw std::runtime_error("Error: validation layer is not supported");
    }

    printAvailableExtensions();

    VkApplicationInfo appInfo = {};
    appInfo.sType = VK_STRUCTURE_TYPE_APPLICATION_INFO;
    appInfo.pApplicationName = "vulkanLession";
    appInfo.applicationVersion = VK_MAKE_VERSION(1, 0, 0);
    appInfo.pEngineName = "NO ENGINE";
    appInfo.engineVersion = VK_MAKE_VERSION(1, 0, 0);
    appInfo.apiVersion = VK_API_VERSION_1_0;

    VkInstanceCreateInfo instCreateInfo = {};
    instCreateInfo.sType = VK_STRUCTURE_TYPE_INSTANCE_CREATE_INFO;
    instCreateInfo.pApplicationInfo = &appInfo;

    //æ‰©å±•ç›¸å…³
    auto extensions = getRequiredExtensions();
    instCreateInfo.enabledExtensionCount = static_cast<uint32_t>(extensions.size());
    instCreateInfo.ppEnabledExtensionNames = extensions.data();
    #if defined(__APPLE__)
    instCreateInfo.flags |= VK_INSTANCE_CREATE_ENUMERATE_PORTABILITY_BIT_KHR;
    #endif
    //layerç›¸å…³
    if (mEnableValidationLayer) {
        instCreateInfo.enabledLayerCount = static_cast<uint32_t>(validationLayers.size());
        instCreateInfo.ppEnabledLayerNames = validationLayers.data();
    } else {
        instCreateInfo.enabledLayerCount = 0;
    }

    if (vkCreateInstance(&instCreateInfo, nullptr, &mInstance) != VK_SUCCESS) {
        throw std::runtime_error("Error:failed to create instance");
    }

    setupDebugger();
}

std::vector<const char *> Instance::getRequiredExtensions() {
    uint32_t glfwExtensionCount = 0;

    const char **glfwExtensions = glfwGetRequiredInstanceExtensions(&glfwExtensionCount);

    std::vector<const char *> extensions(glfwExtensions, glfwExtensions + glfwExtensionCount);

    extensions.push_back(VK_EXT_DEBUG_UTILS_EXTENSION_NAME);
    #if defined(__APPLE__)
    extensions.push_back(VK_KHR_PORTABILITY_ENUMERATION_EXTENSION_NAME);
    extensions.push_back(VK_KHR_GET_PHYSICAL_DEVICE_PROPERTIES_2_EXTENSION_NAME);
    #endif
    return extensions;
}
~~~

è®¾å¤‡éƒ¨åˆ†(device.cpp)

~~~ cpp
int Device::rateDevice(VkPhysicalDevice device) {
    int score = 0;

    // è®¾å¤‡åç§° ç±»å‹ æ”¯æŒvulkançš„ç‰ˆæœ¬
    VkPhysicalDeviceProperties deviceProp;
    vkGetPhysicalDeviceProperties(device, &deviceProp);

    // çº¹ç†å‹ç¼© æµ®ç‚¹æ•°è¿ç®—ç‰¹æ€§ å¤šè§†å£æ¸²æŸ“
    VkPhysicalDeviceFeatures deviceFeatures;
    vkGetPhysicalDeviceFeatures(device, &deviceFeatures);

    // æ‰“å°è®¾å¤‡ä¿¡æ¯è¿›è¡Œè°ƒè¯•
    //printf("è®¾å¤‡åç§°: %s\n", deviceProp.deviceName);
    //printf("è®¾å¤‡ç±»å‹: %d\n", deviceProp.deviceType);
    //printf("æ”¯æŒå‡ ä½•ç€è‰²å™¨: %d\n", deviceFeatures.geometryShader);
    //printf("æ”¯æŒå„å‘å¼‚æ€§é‡‡æ ·: %d\n", deviceFeatures.samplerAnisotropy);

    // ä¸åŒå¹³å°çš„è®¾å¤‡è¯„åˆ†é€»è¾‘
    #if defined(__APPLE__)
    // macOSå¹³å°ï¼šMç³»åˆ—èŠ¯ç‰‡åªæœ‰é›†æˆæ˜¾å¡ï¼Œå¦åˆ™ä¼šæ‰¾ä¸åˆ°ç‰©ç†è®¾å¤‡ 
    // æ£€æŸ¥æ˜¯å¦ä¸ºApple GPU (é€šè¿‡è®¾å¤‡åç§°è¯†åˆ«)
    if (std::string(deviceProp.deviceName).find("Apple") != std::string::npos)
    {
        score += 1000;
    }
    // ç¡®ä¿Apple GPUè‡³å°‘æœ‰åŸºç¡€åˆ†æ•°
    score = std::max(score, 100);
    #elif defined(_WIN32)
    // Windowså¹³å°ï¼šä»…ä¸ºç‹¬ç«‹æ˜¾å¡æä¾›é«˜åˆ†
    if (deviceProp.deviceType == VK_PHYSICAL_DEVICE_TYPE_DISCRETE_GPU) {
        score += 1000;
    }
    #endif

    score += deviceProp.limits.maxImageDimension2D;

    return score;
}

bool Device::isDeviceSuitable(VkPhysicalDevice device) {
    // è®¾å¤‡åç§° ç±»å‹ æ”¯æŒvulkançš„ç‰ˆæœ¬
    VkPhysicalDeviceProperties deviceProp;
    vkGetPhysicalDeviceProperties(device, &deviceProp);

    // çº¹ç†å‹ç¼© æµ®ç‚¹æ•°è¿ç®—ç‰¹æ€§ å¤šè§†å£æ¸²æŸ“
    VkPhysicalDeviceFeatures deviceFeatures;
    vkGetPhysicalDeviceFeatures(device, &deviceFeatures);

    // ä¸åŒå¹³å°çš„è®¾å¤‡é€‚é…é€»è¾‘
    #if defined(_WIN32)
    // Windowså¹³å°ï¼šä¿æŒåŸæœ‰è¦æ±‚
    return deviceProp.deviceType == VK_PHYSICAL_DEVICE_TYPE_DISCRETE_GPU &&
        deviceFeatures.geometryShader &&
        deviceFeatures.samplerAnisotropy;
		#elif defined(__APPLE__)
        // macOSå¹³å°ï¼šæ”¾å®½è®¾å¤‡ç‰¹æ€§æ”¯æŒè¦æ±‚
        return true;
		#else
		//æ¯”å¦‚è¦æ±‚ç‰©ç†è®¾å¤‡å¿…é¡»æ˜¯ç‹¬ç«‹æ˜¾å¡ä¸”è¦æ”¯æŒå‡ ä½•ç€è‰²å™¨
		return deviceProp.deviceType == VK_PHYSICAL_DEVICE_TYPE_DISCRETE_GPU &&
			deviceFeatures.geometryShader;
		#endif
}
void Device::createLogicalDevice() {
    std::vector<VkDeviceQueueCreateInfo> queueCreateInfos;

    std::set<uint32_t> queueFamilies = {mGraphicQueueFamily.value(), mPresentQueueFamily.value()};

    float queuePriority = 1.0;

    for (uint32_t queueFamily: queueFamilies) {
        // å¡«å†™åˆ›å»ºä¿¡æ¯
        VkDeviceQueueCreateInfo queueCreateInfo = {};
        queueCreateInfo.sType = VK_STRUCTURE_TYPE_DEVICE_QUEUE_CREATE_INFO;
        queueCreateInfo.queueFamilyIndex = queueFamily;
        queueCreateInfo.queueCount = 1;
        queueCreateInfo.pQueuePriorities = &queuePriority;

        queueCreateInfos.push_back(queueCreateInfo);
    }

    // å¡«å†™é€»è¾‘è®¾å¤‡åˆ›å»ºä¿¡æ¯
    VkPhysicalDeviceFeatures deviceFeatures = {};
    deviceFeatures.samplerAnisotropy = VK_TRUE;

    std::vector<const char *> extensions = deviceRequiredExtensions;
    #if defined(__APPLE__)
    // æ·»åŠ VK_KHR_portability_subsetæ‰©å±•
    extensions.push_back("VK_KHR_portability_subset");
    #endif

    VkDeviceCreateInfo deviceCreateInfo = {};
    deviceCreateInfo.sType = VK_STRUCTURE_TYPE_DEVICE_CREATE_INFO;
    deviceCreateInfo.pQueueCreateInfos = queueCreateInfos.data();
    deviceCreateInfo.queueCreateInfoCount = static_cast<uint32_t>(queueCreateInfos.size());
    deviceCreateInfo.pEnabledFeatures = &deviceFeatures;
    deviceCreateInfo.enabledExtensionCount = static_cast<uint32_t>(extensions.size());
    deviceCreateInfo.ppEnabledExtensionNames = extensions.data();

    // layerå±‚
    if (mInstance->getEnableValidationLayer()) {
        deviceCreateInfo.enabledLayerCount = static_cast<uint32_t>(validationLayers.size());
        deviceCreateInfo.ppEnabledLayerNames = validationLayers.data();
    } else {
        deviceCreateInfo.enabledLayerCount = 0;
    }

    if (vkCreateDevice(mPhysicalDevice, &deviceCreateInfo, nullptr, &mDevice) != VK_SUCCESS) {
        throw std::runtime_error("Error:failed to create logical device");
    }

    vkGetDeviceQueue(mDevice, mGraphicQueueFamily.value(), 0, &mGraphicQueue);
    vkGetDeviceQueue(mDevice, mPresentQueueFamily.value(), 0, &mPresentQueue);
}
~~~

### Q:ä¸ºä»€ä¹ˆæœ¬é¡¹ç›®éœ€è¦ä½¿ç”¨VSæ‰“å¼€ï¼Ÿï¼Œä»¥åŠä¸ºä»€ä¹ˆä½¿ç”¨CLioné»˜è®¤è®¾ç½®æœ‰å¯èƒ½ä¼šæ„å»ºå¤±è´¥

å› ä¸ºMSVCç¼–è¯‘å™¨å¯¹äºä¾èµ–åº“çš„é“¾æ¥é¡ºåºç›¸å¯¹å®½æ¾ï¼Œè€ŒCLioné»˜è®¤è®¾ç½®(ä½¿ç”¨MingWç¼–è¯‘å™¨)åˆ™ç›¸å¯¹ä¸¥æ ¼ï¼Œéœ€è¦è°ƒæ•´CMakeLists.txtæ–‡ä»¶ä¸­çš„é“¾æ¥é¡ºåºï¼Œå¦åˆ™ä¼šå‡ºç°é“¾æ¥é”™è¯¯ã€‚

~~~ cmake
# æ¯”å¦‚
target_link_libraries(${CHAPTER_NAME}
        vulkanLib
        textureLib # å› ä¸ºtextureLibä¾èµ–vulkanLib
        Vulkan::Vulkan
        glslang
        glslang::SPIRV
        glslang::glslang-default-resource-limits
        glfw
        glm
)
#éœ€è¦è°ƒæ•´ä¸º
target_link_libraries(${CHAPTER_NAME}
        textureLib
        vulkanLib
        Vulkan::Vulkan
        glslang
        glslang::SPIRV
        glslang::glslang-default-resource-limits
        glfw
        glm
)
~~~

## æ–°æ¶æ„ vs æ—§æ¶æ„çš„è¯¦ç»†ä¼˜ç‚¹

æœ¬é¡¹ç›®åŒ…å«äº†åŸå§‹æ¶æ„ï¼ˆChapter13-04ï¼‰å’Œé‡æ„åæ¶æ„ï¼ˆChapter13-04-refactoredï¼‰çš„å¯¹æ¯”ã€‚é‡æ„åçš„æ¶æ„ç›¸æ¯”åŸå§‹æ¶æ„å…·æœ‰æ˜¾è‘—çš„ä¼˜åŠ¿ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†åˆ†æï¼š

### 1. æ¶æ„è®¾è®¡å±‚é¢çš„æ”¹è¿›

#### 1.1 æ¨¡å—åŒ–è®¾è®¡ vs å•ä½“å¼è®¾è®¡

**æ—§æ¶æ„ï¼ˆChapter13-04ï¼‰ï¼š**
```cpp
class VulkanDemoApp {
    // æ‰€æœ‰åŠŸèƒ½éƒ½é›†ä¸­åœ¨ä¸€ä¸ªç±»ä¸­
    VkInstance instance;
    VkDevice device;
    VkSwapchainKHR swapChain;
    VkRenderPass renderPass;
    VkPipeline pipeline;
    // ... 100å¤šä¸ªæˆå‘˜å˜é‡
    // æ‰€æœ‰æ–¹æ³•éƒ½åœ¨ä¸€ä¸ªç±»ä¸­
    void initVulkanInstance();
    void createVulkanDevices();
    void createVulkanSwapChain();
    // ... 50å¤šä¸ªæ–¹æ³•
};
```

**æ–°æ¶æ„ï¼ˆChapter13-04-refactoredï¼‰ï¼š**
```cpp
// èŒè´£åˆ†ç¦»ï¼Œæ¯ä¸ªç±»è´Ÿè´£ç‰¹å®šåŠŸèƒ½
class Application {
    Wrapper::Instance::Ptr mInstance;
    Wrapper::Device::Ptr mDevice;
    Wrapper::SwapChain::Ptr mSwapChain;
    // æ¸…æ™°çš„ä¾èµ–å…³ç³»
};

class Wrapper::Device {
    // ä¸“é—¨è´Ÿè´£è®¾å¤‡ç®¡ç†
};

class Wrapper::SwapChain {
    // ä¸“é—¨è´Ÿè´£äº¤æ¢é“¾ç®¡ç†
};
```

**ä¼˜ç‚¹ï¼š**
- **å•ä¸€èŒè´£åŸåˆ™**ï¼šæ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šåŠŸèƒ½
- **é™ä½è€¦åˆåº¦**ï¼šæ¨¡å—é—´ä¾èµ–å…³ç³»æ¸…æ™°
- **æé«˜å¯æµ‹è¯•æ€§**ï¼šå¯ä»¥ç‹¬ç«‹æµ‹è¯•æ¯ä¸ªæ¨¡å—
- **ä¾¿äºå›¢é˜Ÿåä½œ**ï¼šä¸åŒå¼€å‘è€…å¯ä»¥å¹¶è¡Œå¼€å‘ä¸åŒæ¨¡å—

#### 1.2 ä¾èµ–æ³¨å…¥ vs ç¡¬ç¼–ç ä¾èµ–

**æ—§æ¶æ„ï¼š**
```cpp
void VulkanDemoApp::initVulkan() {
    // ç›´æ¥åˆ›å»ºå’Œç®¡ç†æ‰€æœ‰å¯¹è±¡
    instance = createInstance();
    device = createDevice();
    swapChain = createSwapChain();
}
```

**æ–°æ¶æ„ï¼š**
```cpp
void Application::initVulkan() {
    // é€šè¿‡å·¥å‚æ–¹æ³•åˆ›å»ºï¼Œä¾èµ–æ³¨å…¥
    mInstance = Wrapper::Instance::create(true);
    mDevice = Wrapper::Device::create(mInstance, mSurface);
    mSwapChain = Wrapper::SwapChain::create(mDevice, mWindow, mSurface, mCommandPool);
}
```

**ä¼˜ç‚¹ï¼š**
- **çµæ´»æ€§**ï¼šå¯ä»¥è½»æ¾æ›¿æ¢å®ç°
- **å¯é…ç½®æ€§**ï¼šå‚æ•°åŒ–åˆ›å»ºè¿‡ç¨‹
- **å¯æ‰©å±•æ€§**ï¼šæ˜“äºæ·»åŠ æ–°çš„åˆ›å»ºç­–ç•¥

### 2. èµ„æºç®¡ç†å±‚é¢çš„æ”¹è¿›

#### 2.1 RAII + æ™ºèƒ½æŒ‡é’ˆ vs æ‰‹åŠ¨ç®¡ç†

**æ—§æ¶æ„ï¼š**
```cpp
class VulkanDemoApp {
    VkDevice device;
    VkSwapchainKHR swapChain;
    VkRenderPass renderPass;
    
    ~VulkanDemoApp() {
        // æ‰‹åŠ¨æ¸…ç†ï¼Œå®¹æ˜“é—æ¼
        vkDestroyRenderPass(device, renderPass, nullptr);
        vkDestroySwapchainKHR(device, swapChain, nullptr);
        vkDestroyDevice(device, nullptr);
    }
};
```

**æ–°æ¶æ„ï¼š**
```cpp
class Application {
    Wrapper::Device::Ptr mDevice{ nullptr };
    Wrapper::SwapChain::Ptr mSwapChain{ nullptr };
    Wrapper::RenderPass::Ptr mRenderPass{ nullptr };
    
    // ææ„å‡½æ•°è‡ªåŠ¨è°ƒç”¨æ™ºèƒ½æŒ‡é’ˆçš„ææ„
    // æ— éœ€æ‰‹åŠ¨ç®¡ç†èµ„æº
};

class Wrapper::Device {
    VkDevice mDevice{ VK_NULL_HANDLE };
    ~Device() {
        if (mDevice != VK_NULL_HANDLE) {
            vkDestroyDevice(mDevice, nullptr);
        }
    }
};
```

**ä¼˜ç‚¹ï¼š**
- **è‡ªåŠ¨èµ„æºç®¡ç†**ï¼šæ™ºèƒ½æŒ‡é’ˆè‡ªåŠ¨å¤„ç†èµ„æºé‡Šæ”¾
- **å¼‚å¸¸å®‰å…¨**ï¼šå³ä½¿å‘ç”Ÿå¼‚å¸¸ä¹Ÿèƒ½æ­£ç¡®æ¸…ç†èµ„æº
- **å‡å°‘å†…å­˜æ³„æ¼**ï¼šRAIIæœºåˆ¶ç¡®ä¿èµ„æºä¸æ³„æ¼
- **ç®€åŒ–ä»£ç **ï¼šæ— éœ€æ‰‹åŠ¨ç¼–å†™æ¸…ç†ä»£ç 

### 3. é”™è¯¯å¤„ç†å±‚é¢çš„æ”¹è¿›

#### 3.1 å¼‚å¸¸å¤„ç† vs é”™è¯¯ç 

**æ—§æ¶æ„ï¼š**
```cpp
VkResult result = vkCreateInstance(&createInfo, nullptr, &instance);
if (result != VK_SUCCESS) {
    // ç®€å•çš„é”™è¯¯å¤„ç†
    std::cerr << "Failed to create instance!" << std::endl;
    return;
}
```

**æ–°æ¶æ„ï¼š**
```cpp
class Wrapper::Instance {
    Instance() {
        if (vkCreateInstance(&createInfo, nullptr, &mInstance) != VK_SUCCESS) {
            throw std::runtime_error("Failed to create Vulkan instance!");
        }
    }
};

// ä½¿ç”¨æ—¶çš„å¼‚å¸¸å¤„ç†
try {
    mInstance = Wrapper::Instance::create(true);
} catch (const std::exception& e) {
    std::cerr << e.what() << std::endl;
    return EXIT_FAILURE;
}
```

**ä¼˜ç‚¹ï¼š**
- **ç»Ÿä¸€çš„é”™è¯¯å¤„ç†**ï¼šä½¿ç”¨C++å¼‚å¸¸æœºåˆ¶
- **æ›´å¥½çš„é”™è¯¯ä¿¡æ¯**ï¼šè¯¦ç»†çš„é”™è¯¯æè¿°
- **å¼‚å¸¸å®‰å…¨**ï¼šä¿è¯ç¨‹åºçŠ¶æ€ä¸€è‡´æ€§
- **å‡å°‘é”™è¯¯å¤„ç†ä»£ç **ï¼šé›†ä¸­å¤„ç†å¼‚å¸¸

### 4. ä»£ç è´¨é‡å±‚é¢çš„æ”¹è¿›

#### 4.1 ç±»å‹å®‰å…¨

**æ—§æ¶æ„ï¼š**
```cpp
// ä½¿ç”¨åŸå§‹æŒ‡é’ˆï¼Œç±»å‹ä¸å®‰å…¨
VkDevice device;
VkSwapchainKHR swapChain;
// å®¹æ˜“æ··æ·†ä¸åŒç±»å‹çš„å¥æŸ„
```

**æ–°æ¶æ„ï¼š**
```cpp
// å¼ºç±»å‹å°è£…
class Wrapper::Device {
    VkDevice mDevice{ VK_NULL_HANDLE };
public:
    [[nodiscard]] auto getDevice() const { return mDevice; }
};

class Wrapper::SwapChain {
    VkSwapchainKHR mSwapChain{ VK_NULL_HANDLE };
public:
    [[nodiscard]] auto getSwapChain() const { return mSwapChain; }
};
```

**ä¼˜ç‚¹ï¼š**
- **ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥**ï¼šé¿å…ç±»å‹é”™è¯¯
- **æ›´å¥½çš„IDEæ”¯æŒ**ï¼šè‡ªåŠ¨è¡¥å…¨å’Œé”™è¯¯æç¤º
- **é˜²æ­¢è¯¯ç”¨**ï¼šå°è£…åçš„æ¥å£æ›´å®‰å…¨

#### 4.2 ç°ä»£C++ç‰¹æ€§

**æ—§æ¶æ„ï¼š**
```cpp
// ä½¿ç”¨Cé£æ ¼ä»£ç 
VkDevice device = VK_NULL_HANDLE;
VkSwapchainKHR swapChain = VK_NULL_HANDLE;
```

**æ–°æ¶æ„ï¼š**
```cpp
// ä½¿ç”¨ç°ä»£C++ç‰¹æ€§
using Ptr = std::shared_ptr<Device>;
static Ptr create(const Instance::Ptr& instance, const WindowSurface::Ptr& surface) { 
    return std::make_shared<Device>(instance, surface); 
}

// ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå’ŒRAII
Wrapper::Device::Ptr mDevice{ nullptr };
```

**ä¼˜ç‚¹ï¼š**
- **å†…å­˜å®‰å…¨**ï¼šæ™ºèƒ½æŒ‡é’ˆè‡ªåŠ¨ç®¡ç†å†…å­˜
- **å¼‚å¸¸å®‰å…¨**ï¼šRAIIä¿è¯èµ„æºæ­£ç¡®é‡Šæ”¾
- **ä»£ç ç®€æ´**ï¼šå‡å°‘æ ·æ¿ä»£ç 
- **æ€§èƒ½ä¼˜åŒ–**ï¼šç§»åŠ¨è¯­ä¹‰å’Œå®Œç¾è½¬å‘

### 5. å¯ç»´æŠ¤æ€§å±‚é¢çš„æ”¹è¿›

#### 5.1 ä»£ç ç»„ç»‡

**æ—§æ¶æ„ï¼š**
```
Chapter13-04/src/
â”œâ”€â”€ VulkanDemoApp.h (132è¡Œï¼ŒåŒ…å«æ‰€æœ‰å£°æ˜)
â”œâ”€â”€ VulkanDemoApp.cpp (916è¡Œï¼ŒåŒ…å«æ‰€æœ‰å®ç°)
â”œâ”€â”€ å…¶ä»–å·¥å…·ç±»æ–‡ä»¶...
```

**æ–°æ¶æ„ï¼š**
```
Chapter13-04-refactored/
â”œâ”€â”€ application.h (94è¡Œï¼Œæ¸…æ™°çš„æ¥å£)
â”œâ”€â”€ application.cpp (497è¡Œï¼Œä¸“æ³¨åº”ç”¨é€»è¾‘)
â”œâ”€â”€ vulkanWrapper/ (38ä¸ªæ–‡ä»¶ï¼Œæ¨¡å—åŒ–å°è£…)
â”‚   â”œâ”€â”€ device.h/cpp
â”‚   â”œâ”€â”€ swapChain.h/cpp
â”‚   â””â”€â”€ ...
```

**ä¼˜ç‚¹ï¼š**
- **æ–‡ä»¶å¤§å°åˆç†**ï¼šæ¯ä¸ªæ–‡ä»¶èŒè´£å•ä¸€
- **æ˜“äºå¯¼èˆª**ï¼šæ¸…æ™°çš„ç›®å½•ç»“æ„
- **ä¾¿äºç»´æŠ¤**ï¼šä¿®æ”¹å½±å“èŒƒå›´å°

#### 5.2 æ¥å£è®¾è®¡

**æ—§æ¶æ„ï¼š**
```cpp
// æš´éœ²å†…éƒ¨å®ç°ç»†èŠ‚
class VulkanDemoApp {
public:
    VkDevice device;  // ç›´æ¥æš´éœ²Vulkanå¥æŸ„
    VkSwapchainKHR swapChain;
    // å¤§é‡å…¬å…±æˆå‘˜å˜é‡
};
```

**æ–°æ¶æ„ï¼š**
```cpp
// å°è£…å®ç°ç»†èŠ‚
class Application {
private:
    Wrapper::Device::Ptr mDevice{ nullptr };
    Wrapper::SwapChain::Ptr mSwapChain{ nullptr };
    
public:
    void run();  // åªæš´éœ²å¿…è¦çš„æ¥å£
    void onMouseMove(double xpos, double ypos);
    void onKeyDown(int key, int action);
};
```

### 6. æ€§èƒ½å±‚é¢çš„æ”¹è¿›

#### 6.1 å¯¹è±¡åˆ›å»ºä¼˜åŒ–

**æ—§æ¶æ„ï¼š**
```cpp
// æ¯æ¬¡é‡å»ºæ—¶é‡æ–°åˆ›å»ºæ‰€æœ‰å¯¹è±¡
void recreateSwapChain() {
    vkDestroyRenderPass(device, renderPass, nullptr);
    vkDestroyPipeline(device, graphicsPipeline, nullptr);
    // é‡æ–°åˆ›å»ºæ‰€æœ‰å¯¹è±¡
}
```

**æ–°æ¶æ„ï¼š**
```cpp
// æ™ºèƒ½æŒ‡é’ˆè‡ªåŠ¨ç®¡ç†ï¼Œåªé‡å»ºå¿…è¦çš„å¯¹è±¡
void recreateSwapChain() {
    cleanupSwapChain();  // è‡ªåŠ¨æ¸…ç†
    mSwapChain = Wrapper::SwapChain::create(mDevice, mWindow, mSurface, mCommandPool);
    // å…¶ä»–å¯¹è±¡å¯ä»¥å¤ç”¨
}
```

### 7. å¯æ‰©å±•æ€§å±‚é¢çš„æ”¹è¿›

#### 7.1 æ’ä»¶åŒ–æ¶æ„

**æ—§æ¶æ„ï¼š**
```cpp
// ç¡¬ç¼–ç çš„åŠŸèƒ½
class VulkanDemoApp {
    void drawObject();  // å›ºå®šçš„ç»˜åˆ¶é€»è¾‘
};
```

**æ–°æ¶æ„ï¼š**
```cpp
// å¯æ‰©å±•çš„æ¶æ„
class Application {
    Model::Ptr mModel{ nullptr };
    void drawObjects();  // å¯ä»¥ç»˜åˆ¶å¤šä¸ªå¯¹è±¡
    
    // å¯ä»¥è½»æ¾æ·»åŠ æ–°çš„æ¸²æŸ“åŠŸèƒ½
    void addModel(const Model::Ptr& model);
    void setRenderMode(RenderMode mode);
};
```

## æ¶æ„å¯¹æ¯”æ€»ç»“

| ç‰¹æ€§ | æ—§æ¶æ„ | æ–°æ¶æ„ |
|------|--------|--------|
| **æ¶æ„è®¾è®¡** | å•ä½“å¼è®¾è®¡ | æ¨¡å—åŒ–è®¾è®¡ |
| **èµ„æºç®¡ç†** | æ‰‹åŠ¨ç®¡ç† | RAII + æ™ºèƒ½æŒ‡é’ˆ |
| **é”™è¯¯å¤„ç†** | åŸºç¡€é”™è¯¯ç  | å¼‚å¸¸å®‰å…¨ + éªŒè¯å±‚ |
| **ä»£ç ç»„ç»‡** | å¤§æ–‡ä»¶é›†ä¸­ | æ¨¡å—åŒ–åˆ†ç¦» |
| **ç±»å‹å®‰å…¨** | åŸå§‹æŒ‡é’ˆ | å¼ºç±»å‹å°è£… |
| **å¯ç»´æŠ¤æ€§** | ä¸­ç­‰ | é«˜ |
| **å¯æ‰©å±•æ€§** | æœ‰é™ | è‰¯å¥½ |
| **ä»£ç å¤ç”¨** | ä½ | é«˜ |
| **å›¢é˜Ÿåä½œ** | å›°éš¾ | å®¹æ˜“ |
| **æµ‹è¯•æ€§** | å›°éš¾ | å®¹æ˜“ |

## æœ¬æ¬¡é‡æ„å¸¦æ¥çš„æ ¸å¿ƒä»·å€¼

1. **å¼€å‘æ•ˆç‡æå‡**ï¼šæ¨¡å—åŒ–è®¾è®¡ä½¿å¾—å¼€å‘æ›´åŠ é«˜æ•ˆ
2. **ç»´æŠ¤æˆæœ¬é™ä½**ï¼šæ¸…æ™°çš„æ¶æ„å‡å°‘äº†ç»´æŠ¤éš¾åº¦
3. **é”™è¯¯ç‡å‡å°‘**ï¼šç±»å‹å®‰å…¨å’Œè‡ªåŠ¨èµ„æºç®¡ç†å‡å°‘äº†å¸¸è§é”™è¯¯
4. **å›¢é˜Ÿåä½œæ”¹å–„**ï¼šæ¸…æ™°çš„æ¨¡å—è¾¹ç•Œä¾¿äºå¤šäººåä½œ
5. **åŠŸèƒ½æ‰©å±•å®¹æ˜“**ï¼šæ’ä»¶åŒ–æ¶æ„æ”¯æŒå¿«é€Ÿæ·»åŠ æ–°åŠŸèƒ½
6. **ä»£ç è´¨é‡æå‡**ï¼šç°ä»£C++ç‰¹æ€§æé«˜äº†ä»£ç è´¨é‡

è¿™äº›æ”¹è¿›ä½¿å¾—é‡æ„åçš„é¡¹ç›®æ›´åŠ å¥å£®ã€å¯ç»´æŠ¤ã€å¯æ‰©å±•ï¼Œä¸ºåç»­çš„åŠŸèƒ½å¼€å‘å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚

## åè®°

1. ä¸ºäº†è®©ä¹¦ä¸­ä½¿ç”¨glslangå°†glslç¼–è¯‘æˆspir-vçš„ä»£ç å¯ç”¨ã€‚ä½¿ç”¨SDKä¸­çš„å¤´å’Œåº“æ–‡ä»¶ç¼–è¯‘åä¸€ç›´æŠ¥é”™æ‰¾ä¸åˆ°ç¬¦å·ï¼ŒæŠ˜è…¾äº†ä¸‰å››å¤©ç¿»äº†å‡ åç¯‡åšå®¢æ‰æå®šä¾èµ–å¹¶è§£å†³glslç¼–è¯‘æˆspirVä»£ç 
2. æŠ¥é”™`0xC0000374`:å †æ ˆæº¢å‡ºï¼ˆStack Overflowï¼‰,å¯èƒ½æ˜¯ObjObject::~ObjObject()ä¸­çš„`delete vdata;`è€Œä¸æ˜¯`delete[] vdata;`é€ æˆçš„
3. ã€Šå®æˆ˜è¯¦è§£ã€‹é‡Œè¿™ä¹ˆå¤šæœ‰ä»·å€¼çš„ä»£ç ä¸èƒ½è¿è¡Œæˆ‘çœŸæ˜¯é†‰äº† (ëˆˆâ€¸ëˆˆ)

![å¾·è‰è](./ReadmeAssets/å¾·è‰è.jpg)
